import{r as o,j as e,F as N}from"./app-DnFC_eNL.js";import{B as C}from"./BlogController-BN_QdlpY.js";import{D as w,b as y,a as D,c as F,d as A,e as I,f as S,g as B}from"./dialog-BPceDQJC.js";import{B as r}from"./button-rPaPehJE.js";import{I as u}from"./input-CHVdq988.js";import{L as a}from"./label-CL8gTQN-.js";import{S as _}from"./switch-DK-5hmxD.js";import{I as l}from"./input-error-BW0P0i6f.js";import{R as P}from"./rich-text-editor-DcsXA-i6.js";import{I as E}from"./image-CFdjxShU.js";import{C as L}from"./calendar-days-CaMG1Fy8.js";import{L as T}from"./loader-circle-BcRx3z9B.js";import"./app-D68BraIN.js";import"./index-DW9AIAM8.js";import"./index-Cry_GVru.js";import"./index-CXkLwl-k.js";import"./index-BkDfLQMe.js";import"./index-Dw2Xby9W.js";import"./x-DqWHb4Jg.js";import"./createLucideIcon-RyHhqoDJ.js";import"./index-CNKFNWvJ.js";import"./index-BAQiEn5O.js";import"./index-B1YdNjp7.js";function le({trigger:x}){const[g,n]=o.useState(!1),[d,m]=o.useState(null),[j,c]=o.useState(""),f=(s,i)=>{const t=i?.querySelector('input[name="published_at"]');s&&t&&!t.value&&(t.value=new Date().toISOString().slice(0,10))},b=s=>{const i=s.target.files?.[0];m(i?URL.createObjectURL(i):null)},p=()=>{m(null),c("")};return e.jsxs(w,{open:g,onOpenChange:s=>{s||p(),n(s)},children:[e.jsx(y,{asChild:!0,children:x??e.jsx(r,{children:"New Blog"})}),e.jsx(D,{className:"sm:max-w-3xl",children:e.jsx(N,{...C.store.form(),encType:"multipart/form-data",onSuccess:()=>{n(!1),p()},className:"space-y-5",children:({processing:s,errors:i})=>e.jsxs(e.Fragment,{children:[e.jsxs(F,{children:[e.jsx(A,{children:"Create Blog"}),e.jsx(I,{children:"Add a new post. Slug will be generated on the server."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"title",children:"Title"}),e.jsx(u,{id:"title",name:"title",required:!0,placeholder:"Awesome announcement",autoFocus:!0}),e.jsx(l,{message:i.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"option",children:"Option"}),e.jsxs("select",{id:"option",name:"option",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select an option"}),e.jsx("option",{value:"Abhidh",children:"Abhidh"}),e.jsx("option",{value:"Abhidh Creative",children:"Abhidh Creative"}),e.jsx("option",{value:"Abhidh Academy",children:"Abhidh Academy"})]}),e.jsx(l,{message:i.option})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"image",children:"Cover image"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{htmlFor:"image",className:"inline-flex cursor-pointer items-center gap-2 rounded-md border px-3 py-2 text-sm hover:bg-muted",children:[e.jsx(E,{className:"h-4 w-4"}),"Choose image"]}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",className:"hidden",onChange:b}),d&&e.jsx("img",{src:d,alt:"Preview",className:"h-12 w-16 rounded object-cover border"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG/JPG up to 2MB"}),e.jsx(l,{message:i.image})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"content",children:"Content"}),e.jsx(P,{value:j,onChange:c,placeholder:"Write your postâ€¦",name:"content"}),e.jsx(l,{message:i.content})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"hidden",name:"is_published",value:"0"}),e.jsx("input",{type:"checkbox",id:"is_published",name:"is_published",value:"1",className:"hidden peer"}),e.jsx(_,{"aria-label":"Publish",onCheckedChange:t=>{const v=document.getElementById("is_published")?.closest("form"),h=document.getElementById("is_published");h&&(h.checked=t),f(t,v)}}),e.jsx(a,{htmlFor:"is_published",children:"Publish"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(u,{type:"date",name:"published_at",className:"w-[12.5rem]"})]})]}),e.jsx(l,{message:i.published_at})]}),e.jsxs(S,{className:"gap-2 sm:gap-0",children:[e.jsx(B,{asChild:!0,children:e.jsx(r,{type:"button",variant:"outline",disabled:s,children:"Cancel"})}),e.jsxs(r,{type:"submit",disabled:s,children:[s&&e.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})})})]})}export{le as default};
