import{u as Z,r as T,a as I,j as e,H as ee,b as y}from"./app-DnFC_eNL.js";import{A as se}from"./app-layout-CPQWTGmO.js";import{C as h}from"./CourseController-IFXHYWAo.js";import{B as d}from"./button-rPaPehJE.js";import{I as u}from"./input-CHVdq988.js";import{L as c}from"./label-CL8gTQN-.js";import{S as L,a as A,b as F,c as z,d as f}from"./select-ssExcQiX.js";import{S as ae}from"./switch-DK-5hmxD.js";import{T as S}from"./textarea--jYAAOoe.js";import{I as o}from"./input-error-BW0P0i6f.js";import{R as ie}from"./rich-text-editor-DcsXA-i6.js";import{A as re}from"./arrow-left-CCvMUDLF.js";import{T as g}from"./trash-2-B5Bw4xnK.js";import{P as j}from"./plus-BcU-it2E.js";import{C as E}from"./chevron-up-DExuvaHM.js";import{C as O}from"./chevron-down-DTPvOuGB.js";import{L as te}from"./loader-circle-BcRx3z9B.js";import"./app-D68BraIN.js";import"./index-BkDfLQMe.js";import"./index-CNKFNWvJ.js";import"./index-Cry_GVru.js";import"./index-CXkLwl-k.js";import"./index-Dw2Xby9W.js";import"./x-DqWHb4Jg.js";import"./createLucideIcon-RyHhqoDJ.js";import"./index-DaROCXso.js";import"./index-B1YdNjp7.js";import"./index-D0SzBiVj.js";import"./dropdown-menu-C6nasuCZ.js";import"./log-out-CGS9sCHj.js";import"./index-DTMMEruM.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-fyDU5RF6.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-f0rWim1W.js";import"./images-zKNtNZxa.js";import"./graduation-cap-CKuF5Oy3.js";import"./book-open-check-DnxrUPvp.js";import"./user-check-CKVwFk_t.js";import"./circle-user-round-CVoFbm53.js";import"./chevron-right-EpfWa7Hm.js";import"./index-BAQiEn5O.js";import"./check-DtLexhFW.js";function is(){const{props:D}=Z(),k=D.programs,[x,C]=T.useState(new Set([0])),[v,_]=T.useState(new Set([0])),{data:r,setData:l,post:le,processing:w,errors:n,reset:ce}=I({course_type:"guided",title:"",program_id:null,featured:!1,price:null,description:"",duration:"",target_audience:"",key_learning_objectives:[""],syllabus:[{session:1,course_topic:"",learnings:[""],outcomes:[""],hours:0}],topics:[{topic:"",subtopics:[""],duration:"",content:""}]}),q=[{title:"Courses",href:h.index().url},{title:"Create Course",href:h.create().url}],P=()=>{const s=[...r.syllabus,{session:r.syllabus.length+1,course_topic:"",learnings:[""],outcomes:[""],hours:0}];l("syllabus",s),C(new Set([...x,s.length-1]))},$=s=>{if(r.syllabus.length===1)return;const a=r.syllabus.filter((t,m)=>m!==s);a.forEach((t,m)=>{t.session=m+1}),l("syllabus",a);const i=new Set;x.forEach(t=>{t<s?i.add(t):t>s&&i.add(t-1)}),C(i)},H=s=>{const a=new Set(x);a.has(s)?a.delete(s):a.add(s),C(a)},b=(s,a,i)=>{const t=[...r.syllabus];(a==="learnings"||a==="outcomes")&&Array.isArray(i),t[s][a]=i,l("syllabus",t)},R=s=>{const a=[...r.syllabus];a[s].learnings.push(""),l("syllabus",a)},B=(s,a)=>{const i=[...r.syllabus];i[s].learnings=i[s].learnings.filter((t,m)=>m!==a),l("syllabus",i)},K=s=>{const a=[...r.syllabus];a[s].outcomes.push(""),l("syllabus",a)},V=(s,a)=>{const i=[...r.syllabus];i[s].outcomes=i[s].outcomes.filter((t,m)=>m!==a),l("syllabus",i)},G=()=>{l("key_learning_objectives",[...r.key_learning_objectives,""])},M=s=>{r.key_learning_objectives.length!==1&&l("key_learning_objectives",r.key_learning_objectives.filter((a,i)=>i!==s))},W=()=>{const s=[...r.topics,{topic:"",subtopics:[""],duration:"",content:""}];l("topics",s),_(new Set([...v,s.length-1]))},U=s=>{if(r.topics.length===1)return;l("topics",r.topics.filter((i,t)=>t!==s));const a=new Set;v.forEach(i=>{i<s?a.add(i):i>s&&a.add(i-1)}),_(a)},J=s=>{const a=new Set(v);a.has(s)?a.delete(s):a.add(s),_(a)},N=(s,a,i)=>{const t=[...r.topics];a==="subtopics"&&Array.isArray(i)?t[s].subtopics=i:t[s][a]=i,l("topics",t)},Q=s=>{const a=[...r.topics];a[s].subtopics.push(""),l("topics",a)},X=(s,a)=>{const i=[...r.topics];i[s].subtopics=i[s].subtopics.filter((t,m)=>m!==a),l("topics",i)},Y=s=>{s.preventDefault();const a={course_type:r.course_type,title:r.title,featured:!!r.featured};r.program_id&&(a.program_id=r.program_id),r.price!==null&&r.price!==void 0&&(a.price=r.price),r.course_type==="guided"?(a.description=r.description,a.duration=r.duration||null,a.target_audience=r.target_audience,a.key_learning_objectives=r.key_learning_objectives.filter(i=>i.trim()!==""),a.syllabus=r.syllabus.map(i=>({session:i.session,course_topic:i.course_topic,learnings:i.learnings.filter(t=>t.trim()!==""),outcomes:i.outcomes.filter(t=>t.trim()!==""),hours:i.hours}))):(a.description=r.description||null,a.topics=r.topics.map(i=>({topic:i.topic,subtopics:i.subtopics.filter(t=>t.trim()!==""),duration:i.duration||null,content:i.content}))),y.post(h.store.url(),a,{onSuccess:()=>{y.visit(h.index().url)}})};return e.jsxs(se,{breadcrumbs:q,children:[e.jsx(ee,{title:"Create Course"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>y.visit(h.index().url),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Create Course"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new course. Choose between Guided or Self-Paced course."})]})]})}),e.jsxs("form",{onSubmit:Y,className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"course_type",children:"Course Type *"}),e.jsxs(L,{value:r.course_type,onValueChange:s=>l("course_type",s),required:!0,children:[e.jsx(A,{className:"w-full max-w-md",children:e.jsx(F,{placeholder:"Select course type"})}),e.jsxs(z,{children:[e.jsx(f,{value:"guided",children:"Guided Course (School/College/Corporate)"}),e.jsx(f,{value:"self_paced",children:"Self-Paced Course"})]})]}),e.jsx(o,{message:n.course_type})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"title",children:"Course Title *"}),e.jsx(u,{id:"title",name:"title",required:!0,value:r.title,onChange:s=>l("title",s.target.value),placeholder:"Course Title",className:"max-w-2xl",autoFocus:!0}),e.jsx(o,{message:n.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"program_id",children:"Program (Optional)"}),e.jsxs(L,{value:r.program_id?String(r.program_id):"none",onValueChange:s=>l("program_id",s==="none"?null:Number(s)),children:[e.jsx(A,{children:e.jsx(F,{placeholder:"Select program (optional)"})}),e.jsx(z,{children:k.length>0?e.jsxs(e.Fragment,{children:[e.jsx(f,{value:"none",children:"None"}),k.map(s=>e.jsx(f,{value:String(s.id),children:s.name},s.id))]}):e.jsx(f,{value:"none",disabled:!0,children:"No programs available"})})]}),e.jsx(o,{message:n.program_id})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-8",children:[e.jsx(ae,{id:"featured",checked:r.featured,onCheckedChange:s=>l("featured",s)}),e.jsx(c,{htmlFor:"featured",children:"Featured Course"}),e.jsx("input",{type:"hidden",name:"featured",value:r.featured?"1":"0"})]})]}),r.course_type==="guided"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"description",children:"Course Description *"}),e.jsx(S,{id:"description",name:"description",required:!0,placeholder:"Describe the course...",rows:5,value:r.description,onChange:s=>l("description",s.target.value),className:"max-w-3xl"}),e.jsx(o,{message:n.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"duration",children:"Duration"}),e.jsx(u,{id:"duration",name:"duration",value:r.duration,onChange:s=>l("duration",s.target.value),placeholder:"e.g., 19 Hours, 2 weeks"}),e.jsx(o,{message:n.duration})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"target_audience",children:"Target Audience *"}),e.jsx(S,{id:"target_audience",name:"target_audience",required:!0,value:r.target_audience,onChange:s=>l("target_audience",s.target.value),placeholder:"HR Professionals, Managers, Team Leaders",rows:3}),e.jsx(o,{message:n.target_audience})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"price",children:"Price (Rs.)"}),e.jsx(u,{id:"price",name:"price",type:"number",min:"0",step:"1",placeholder:"e.g., 5000",value:r.price??"",onChange:s=>l("price",s.target.value?Number(s.target.value):null),className:"max-w-md"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter price in Nepali Rupees (no decimals)"}),e.jsx(o,{message:n.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Key Learning Objectives"}),e.jsx("div",{className:"space-y-2",children:r.key_learning_objectives.map((s,a)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:s,onChange:i=>{const t=[...r.key_learning_objectives];t[a]=i.target.value,l("key_learning_objectives",t)},placeholder:"Learning objective",className:"max-w-2xl"}),r.key_learning_objectives.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>M(a),children:e.jsx(g,{className:"h-4 w-4"})})]},a))}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:G,className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Learning Objective"]}),e.jsx(o,{message:n.key_learning_objectives})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-lg font-semibold",children:"Syllabus *"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:P,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Session"]})]}),e.jsx("div",{className:"space-y-4",children:r.syllabus.map((s,a)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-20",children:[e.jsx(c,{className:"text-xs text-muted-foreground",children:"Session"}),e.jsx(u,{type:"number",value:s.session,onChange:i=>b(a,"session",Number(i.target.value)),className:"w-20",required:!0})]}),e.jsxs(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>H(a),className:"flex items-center gap-2",children:[x.has(a)?e.jsx(E,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"}),"Session ",s.session]})]}),e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>$(a),disabled:r.syllabus.length===1,children:e.jsx(g,{className:"h-4 w-4"})})]}),x.has(a)&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Course Topic *"}),e.jsx(u,{value:s.course_topic,onChange:i=>b(a,"course_topic",i.target.value),placeholder:"Introduction to Happiness at Workplace",required:!0,className:"w-full"}),e.jsx(o,{message:n[`syllabus.${a}.course_topic`]})]}),e.jsxs("div",{className:"grid gap-2 max-w-xs",children:[e.jsx(c,{children:"Hours *"}),e.jsx(u,{type:"number",step:"0.5",value:s.hours||"",onChange:i=>b(a,"hours",Number(i.target.value)),required:!0}),e.jsx(o,{message:n[`syllabus.${a}.hours`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Learnings *"}),e.jsx("div",{className:"space-y-2",children:s.learnings.map((i,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:i,onChange:m=>{const p=[...s.learnings];p[t]=m.target.value,b(a,"learnings",p)},placeholder:"Learning point",required:!0,className:"flex-1"}),s.learnings.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>B(a,t),children:e.jsx(g,{className:"h-4 w-4"})})]},t))}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>R(a),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Learning"]}),e.jsx(o,{message:n[`syllabus.${a}.learnings`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Outcomes"}),e.jsx("div",{className:"space-y-2",children:s.outcomes.map((i,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:i,onChange:m=>{const p=[...s.outcomes];p[t]=m.target.value,b(a,"outcomes",p)},placeholder:"Outcome",className:"flex-1"}),s.outcomes.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>V(a,t),children:e.jsx(g,{className:"h-4 w-4"})})]},t))}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>K(a),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Outcome"]})]})]})]},a))}),e.jsx(o,{message:n.syllabus})]})]}),r.course_type==="self_paced"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"price",children:"Price (Rs.)"}),e.jsx(u,{id:"price",name:"price",type:"number",min:"0",step:"1",placeholder:"e.g., 5000",value:r.price??"",onChange:s=>l("price",s.target.value?Number(s.target.value):null),className:"max-w-md"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter price in Nepali Rupees (no decimals)"}),e.jsx(o,{message:n.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"description",children:"Course Description"}),e.jsx(S,{id:"description",name:"description",placeholder:"Describe the course...",rows:5,value:r.description,onChange:s=>l("description",s.target.value),className:"max-w-3xl"}),e.jsx(o,{message:n.description})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-lg font-semibold",children:"Topics *"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:W,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Topic"]})]}),e.jsx("div",{className:"space-y-4",children:r.topics.map((s,a)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>J(a),className:"flex items-center gap-2",children:[v.has(a)?e.jsx(E,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"}),"Topic ",a+1]}),e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>U(a),disabled:r.topics.length===1,children:e.jsx(g,{className:"h-4 w-4"})})]}),v.has(a)&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Topic Name *"}),e.jsx(u,{value:s.topic,onChange:i=>N(a,"topic",i.target.value),placeholder:"e.g., Introduction to Digital Marketing",required:!0,className:"w-full"}),e.jsx(o,{message:n[`topics.${a}.topic`]})]}),e.jsxs("div",{className:"grid gap-2 max-w-xs",children:[e.jsx(c,{children:"Duration"}),e.jsx(u,{value:s.duration,onChange:i=>N(a,"duration",i.target.value),placeholder:"e.g., 1.5 hrs, 2 hrs"}),e.jsx(o,{message:n[`topics.${a}.duration`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Subtopics"}),e.jsx("div",{className:"space-y-2",children:s.subtopics.map((i,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:i,onChange:m=>{const p=[...s.subtopics];p[t]=m.target.value,N(a,"subtopics",p)},placeholder:"Subtopic",className:"flex-1"}),s.subtopics.length>1&&e.jsx(d,{type:"button",variant:"outline",size:"icon",onClick:()=>X(a,t),children:e.jsx(g,{className:"h-4 w-4"})})]},t))}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>Q(a),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Subtopic"]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Content *"}),e.jsx(ie,{value:s.content,onChange:i=>N(a,"content",i),placeholder:"Write the full content for this topic...",name:`topics[${a}][content]`}),e.jsx(o,{message:n[`topics.${a}.content`]})]})]})]},a))}),e.jsx(o,{message:n.topics})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>y.visit(h.index().url),disabled:w,children:"Cancel"}),e.jsxs(d,{type:"submit",disabled:w,children:[w&&e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Course"]})]})]})]})]})}export{is as default};
