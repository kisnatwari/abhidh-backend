import{u as Z,r as T,a as I,j as e,H as ee,b as y}from"./app-Bgxzhrvc.js";import{A as se}from"./app-layout-CT189y1p.js";import{C as h}from"./CourseController-IFXHYWAo.js";import{B as n}from"./button-2PUVNpYc.js";import{I as u}from"./input-B3PHjxIm.js";import{L as o}from"./label-HpvW4xIi.js";import{S as L,a as A,b as z,c as F,d as f}from"./select-eSxMpkvs.js";import{S as ae}from"./switch-p5ihBc0A.js";import{T as S}from"./textarea-CTvWA9QY.js";import{I as d}from"./input-error-9URGWeZJ.js";import{R as te}from"./rich-text-editor-BcwHZ5q7.js";import{A as ie}from"./arrow-left-I9xPEmFI.js";import{T as g}from"./trash-2-Du2-C_M2.js";import{P as j}from"./plus-B69Lvg4c.js";import{C as O}from"./chevron-up-C5vaA1vC.js";import{C as D}from"./chevron-down-DzLhHXXM.js";import{L as re}from"./loader-circle-BgM9NXsF.js";import"./app-h36GOZo8.js";import"./index-5AvLgYyg.js";import"./index-DzWfvSAt.js";import"./index-Np49ePWI.js";import"./index-DdyAvwB5.js";import"./index-Daeha8jH.js";import"./x-BCrVPaUR.js";import"./createLucideIcon-BU9_NwhO.js";import"./index-BNpA7cIy.js";import"./index-BWC38D-R.js";import"./index-DJFfSsPm.js";import"./dropdown-menu-BquuMAtw.js";import"./log-out-BTFO_Ir2.js";import"./index-DTMMEruM.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-H5NLi0sV.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-DMU_DphB.js";import"./images-1y6J0UPH.js";import"./graduation-cap-BuMJYJEB.js";import"./book-open-check-pTXhZ5_H.js";import"./user-check-BqbDY3W7.js";import"./circle-user-round-Ct2jiSYs.js";import"./chevron-right-C2g-mDCD.js";import"./index-BK3Sl8pL.js";import"./check-CYIf4FlW.js";function ts(){const{props:E}=Z(),k=E.programs,[x,_]=T.useState(new Set([0])),[v,C]=T.useState(new Set([0])),{data:i,setData:l,post:le,processing:w,errors:c,reset:oe}=I({course_type:"guided",title:"",program_id:null,featured:!1,description:"",duration:"",target_audience:"",key_learning_objectives:[""],syllabus:[{session:1,course_topic:"",learnings:[""],outcomes:[""],hours:0}],topics:[{topic:"",subtopics:[""],duration:"",content:""}]}),q=[{title:"Courses",href:h.index().url},{title:"Create Course",href:h.create().url}],P=()=>{const a=[...i.syllabus,{session:i.syllabus.length+1,course_topic:"",learnings:[""],outcomes:[""],hours:0}];l("syllabus",a),_(new Set([...x,a.length-1]))},$=a=>{if(i.syllabus.length===1)return;const s=i.syllabus.filter((r,m)=>m!==a);s.forEach((r,m)=>{r.session=m+1}),l("syllabus",s);const t=new Set;x.forEach(r=>{r<a?t.add(r):r>a&&t.add(r-1)}),_(t)},H=a=>{const s=new Set(x);s.has(a)?s.delete(a):s.add(a),_(s)},b=(a,s,t)=>{const r=[...i.syllabus];(s==="learnings"||s==="outcomes")&&Array.isArray(t),r[a][s]=t,l("syllabus",r)},B=a=>{const s=[...i.syllabus];s[a].learnings.push(""),l("syllabus",s)},K=(a,s)=>{const t=[...i.syllabus];t[a].learnings=t[a].learnings.filter((r,m)=>m!==s),l("syllabus",t)},V=a=>{const s=[...i.syllabus];s[a].outcomes.push(""),l("syllabus",s)},G=(a,s)=>{const t=[...i.syllabus];t[a].outcomes=t[a].outcomes.filter((r,m)=>m!==s),l("syllabus",t)},M=()=>{l("key_learning_objectives",[...i.key_learning_objectives,""])},R=a=>{i.key_learning_objectives.length!==1&&l("key_learning_objectives",i.key_learning_objectives.filter((s,t)=>t!==a))},W=()=>{const a=[...i.topics,{topic:"",subtopics:[""],duration:"",content:""}];l("topics",a),C(new Set([...v,a.length-1]))},U=a=>{if(i.topics.length===1)return;l("topics",i.topics.filter((t,r)=>r!==a));const s=new Set;v.forEach(t=>{t<a?s.add(t):t>a&&s.add(t-1)}),C(s)},J=a=>{const s=new Set(v);s.has(a)?s.delete(a):s.add(a),C(s)},N=(a,s,t)=>{const r=[...i.topics];s==="subtopics"&&Array.isArray(t)?r[a].subtopics=t:r[a][s]=t,l("topics",r)},Q=a=>{const s=[...i.topics];s[a].subtopics.push(""),l("topics",s)},X=(a,s)=>{const t=[...i.topics];t[a].subtopics=t[a].subtopics.filter((r,m)=>m!==s),l("topics",t)},Y=a=>{a.preventDefault();const s={course_type:i.course_type,title:i.title,featured:!!i.featured};i.program_id&&(s.program_id=i.program_id),i.course_type==="guided"?(s.description=i.description,s.duration=i.duration||null,s.target_audience=i.target_audience,s.key_learning_objectives=i.key_learning_objectives.filter(t=>t.trim()!==""),s.syllabus=i.syllabus.map(t=>({session:t.session,course_topic:t.course_topic,learnings:t.learnings.filter(r=>r.trim()!==""),outcomes:t.outcomes.filter(r=>r.trim()!==""),hours:t.hours}))):(s.description=i.description||null,s.topics=i.topics.map(t=>({topic:t.topic,subtopics:t.subtopics.filter(r=>r.trim()!==""),duration:t.duration||null,content:t.content}))),y.post(h.store.url(),s,{onSuccess:()=>{y.visit(h.index().url)}})};return e.jsxs(se,{breadcrumbs:q,children:[e.jsx(ee,{title:"Create Course"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{variant:"outline",size:"icon",onClick:()=>y.visit(h.index().url),children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Create Course"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new course. Choose between Guided or Self-Paced course."})]})]})}),e.jsxs("form",{onSubmit:Y,className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"course_type",children:"Course Type *"}),e.jsxs(L,{value:i.course_type,onValueChange:a=>l("course_type",a),required:!0,children:[e.jsx(A,{className:"w-full max-w-md",children:e.jsx(z,{placeholder:"Select course type"})}),e.jsxs(F,{children:[e.jsx(f,{value:"guided",children:"Guided Course (School/College/Corporate)"}),e.jsx(f,{value:"self_paced",children:"Self-Paced Course"})]})]}),e.jsx(d,{message:c.course_type})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"title",children:"Course Title *"}),e.jsx(u,{id:"title",name:"title",required:!0,value:i.title,onChange:a=>l("title",a.target.value),placeholder:"Course Title",className:"max-w-2xl",autoFocus:!0}),e.jsx(d,{message:c.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"program_id",children:"Program (Optional)"}),e.jsxs(L,{value:i.program_id?String(i.program_id):"none",onValueChange:a=>l("program_id",a==="none"?null:Number(a)),children:[e.jsx(A,{children:e.jsx(z,{placeholder:"Select program (optional)"})}),e.jsx(F,{children:k.length>0?e.jsxs(e.Fragment,{children:[e.jsx(f,{value:"none",children:"None"}),k.map(a=>e.jsx(f,{value:String(a.id),children:a.name},a.id))]}):e.jsx(f,{value:"none",disabled:!0,children:"No programs available"})})]}),e.jsx(d,{message:c.program_id})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-8",children:[e.jsx(ae,{id:"featured",checked:i.featured,onCheckedChange:a=>l("featured",a)}),e.jsx(o,{htmlFor:"featured",children:"Featured Course"}),e.jsx("input",{type:"hidden",name:"featured",value:i.featured?"1":"0"})]})]}),i.course_type==="guided"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"description",children:"Course Description *"}),e.jsx(S,{id:"description",name:"description",required:!0,placeholder:"Describe the course...",rows:5,value:i.description,onChange:a=>l("description",a.target.value),className:"max-w-3xl"}),e.jsx(d,{message:c.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"duration",children:"Duration"}),e.jsx(u,{id:"duration",name:"duration",value:i.duration,onChange:a=>l("duration",a.target.value),placeholder:"e.g., 19 Hours, 2 weeks"}),e.jsx(d,{message:c.duration})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"target_audience",children:"Target Audience *"}),e.jsx(S,{id:"target_audience",name:"target_audience",required:!0,value:i.target_audience,onChange:a=>l("target_audience",a.target.value),placeholder:"HR Professionals, Managers, Team Leaders",rows:3}),e.jsx(d,{message:c.target_audience})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Key Learning Objectives"}),e.jsx("div",{className:"space-y-2",children:i.key_learning_objectives.map((a,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:a,onChange:t=>{const r=[...i.key_learning_objectives];r[s]=t.target.value,l("key_learning_objectives",r)},placeholder:"Learning objective",className:"max-w-2xl"}),i.key_learning_objectives.length>1&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>R(s),children:e.jsx(g,{className:"h-4 w-4"})})]},s))}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:M,className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Learning Objective"]}),e.jsx(d,{message:c.key_learning_objectives})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-lg font-semibold",children:"Syllabus *"}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:P,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Session"]})]}),e.jsx("div",{className:"space-y-4",children:i.syllabus.map((a,s)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-20",children:[e.jsx(o,{className:"text-xs text-muted-foreground",children:"Session"}),e.jsx(u,{type:"number",value:a.session,onChange:t=>b(s,"session",Number(t.target.value)),className:"w-20",required:!0})]}),e.jsxs(n,{type:"button",variant:"ghost",size:"sm",onClick:()=>H(s),className:"flex items-center gap-2",children:[x.has(s)?e.jsx(O,{className:"h-4 w-4"}):e.jsx(D,{className:"h-4 w-4"}),"Session ",a.session]})]}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>$(s),disabled:i.syllabus.length===1,children:e.jsx(g,{className:"h-4 w-4"})})]}),x.has(s)&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Course Topic *"}),e.jsx(u,{value:a.course_topic,onChange:t=>b(s,"course_topic",t.target.value),placeholder:"Introduction to Happiness at Workplace",required:!0,className:"w-full"}),e.jsx(d,{message:c[`syllabus.${s}.course_topic`]})]}),e.jsxs("div",{className:"grid gap-2 max-w-xs",children:[e.jsx(o,{children:"Hours *"}),e.jsx(u,{type:"number",step:"0.5",value:a.hours||"",onChange:t=>b(s,"hours",Number(t.target.value)),required:!0}),e.jsx(d,{message:c[`syllabus.${s}.hours`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Learnings *"}),e.jsx("div",{className:"space-y-2",children:a.learnings.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:t,onChange:m=>{const p=[...a.learnings];p[r]=m.target.value,b(s,"learnings",p)},placeholder:"Learning point",required:!0,className:"flex-1"}),a.learnings.length>1&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>K(s,r),children:e.jsx(g,{className:"h-4 w-4"})})]},r))}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>B(s),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Learning"]}),e.jsx(d,{message:c[`syllabus.${s}.learnings`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Outcomes"}),e.jsx("div",{className:"space-y-2",children:a.outcomes.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:t,onChange:m=>{const p=[...a.outcomes];p[r]=m.target.value,b(s,"outcomes",p)},placeholder:"Outcome",className:"flex-1"}),a.outcomes.length>1&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>G(s,r),children:e.jsx(g,{className:"h-4 w-4"})})]},r))}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>V(s),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Outcome"]})]})]})]},s))}),e.jsx(d,{message:c.syllabus})]})]}),i.course_type==="self_paced"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"description",children:"Course Description"}),e.jsx(S,{id:"description",name:"description",placeholder:"Describe the course...",rows:5,value:i.description,onChange:a=>l("description",a.target.value),className:"max-w-3xl"}),e.jsx(d,{message:c.description})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-lg font-semibold",children:"Topics *"}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:W,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Topic"]})]}),e.jsx("div",{className:"space-y-4",children:i.topics.map((a,s)=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{type:"button",variant:"ghost",size:"sm",onClick:()=>J(s),className:"flex items-center gap-2",children:[v.has(s)?e.jsx(O,{className:"h-4 w-4"}):e.jsx(D,{className:"h-4 w-4"}),"Topic ",s+1]}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>U(s),disabled:i.topics.length===1,children:e.jsx(g,{className:"h-4 w-4"})})]}),v.has(s)&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Topic Name *"}),e.jsx(u,{value:a.topic,onChange:t=>N(s,"topic",t.target.value),placeholder:"e.g., Introduction to Digital Marketing",required:!0,className:"w-full"}),e.jsx(d,{message:c[`topics.${s}.topic`]})]}),e.jsxs("div",{className:"grid gap-2 max-w-xs",children:[e.jsx(o,{children:"Duration"}),e.jsx(u,{value:a.duration,onChange:t=>N(s,"duration",t.target.value),placeholder:"e.g., 1.5 hrs, 2 hrs"}),e.jsx(d,{message:c[`topics.${s}.duration`]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Subtopics"}),e.jsx("div",{className:"space-y-2",children:a.subtopics.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{value:t,onChange:m=>{const p=[...a.subtopics];p[r]=m.target.value,N(s,"subtopics",p)},placeholder:"Subtopic",className:"flex-1"}),a.subtopics.length>1&&e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>X(s,r),children:e.jsx(g,{className:"h-4 w-4"})})]},r))}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>Q(s),className:"w-fit",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Add Subtopic"]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{children:"Content *"}),e.jsx(te,{value:a.content,onChange:t=>N(s,"content",t),placeholder:"Write the full content for this topic...",name:`topics[${s}][content]`}),e.jsx(d,{message:c[`topics.${s}.content`]})]})]})]},s))}),e.jsx(d,{message:c.topics})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>y.visit(h.index().url),disabled:w,children:"Cancel"}),e.jsxs(n,{type:"submit",disabled:w,children:[w&&e.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Course"]})]})]})]})]})}export{ts as default};
