import{r as n,j as e,F as N}from"./app-DeyNhaIj.js";import{B as y}from"./BlogController-BN_QdlpY.js";import{D as w,b as _,a as D,c as F,d as I,e as S,f as A,g as B}from"./dialog-VLgjrFb4.js";import{B as o}from"./button-Po8_hoCj.js";import{I as x}from"./input-DYNUQEB0.js";import{L as l}from"./label-C5nTzMn2.js";import{S as E}from"./switch-CZ5_b2XX.js";import{I as r}from"./input-error-9cFJtkRf.js";import{R as P}from"./rich-text-editor-BN0U7LEJ.js";import{I as k}from"./image-B0xc0u5o.js";import{C as L}from"./calendar-days-CYQ13xYw.js";import{L as T}from"./loader-circle-3LwKL-vM.js";import"./app-D68BraIN.js";import"./index-DW9AIAM8.js";import"./index-CdSBMCOc.js";import"./index-VNmnc6HY.js";import"./index-BK4guFTW.js";import"./index-XU9KE0KS.js";import"./x-Cmss8qIq.js";import"./createLucideIcon-Duo5QKwh.js";import"./index-87MTScox.js";import"./index-CVV1tXhf.js";import"./index-PvPWVqt0.js";function re({blog:s,trigger:g}){const[f,d]=n.useState(!1),[m,c]=n.useState(s.image_url||null),[j,p]=n.useState(s.content||""),b=(i,t)=>{const a=t?.querySelector('input[name="published_at"]');i&&a&&!a.value&&(a.value=new Date().toISOString().slice(0,10))},v=i=>{const t=i.target.files?.[0];c(t?URL.createObjectURL(t):s.image_url||null)},h=()=>{c(s.image_url||null),p(s.content||"")};return e.jsxs(w,{open:f,onOpenChange:i=>{i||h(),d(i)},children:[e.jsx(_,{asChild:!0,children:g??e.jsx(o,{variant:"outline",children:"Edit"})}),e.jsx(D,{className:"sm:max-w-3xl",children:e.jsx(N,{method:"post",action:y.update.url(s.id),encType:"multipart/form-data",onSuccess:()=>{d(!1),h()},className:"space-y-5",children:({processing:i,errors:t})=>e.jsxs(e.Fragment,{children:[e.jsxs(F,{children:[e.jsx(I,{children:"Edit Blog"}),e.jsx(S,{children:"Update the blog post. Slug will be regenerated on the server."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"title",children:"Title"}),e.jsx(x,{id:"title",name:"title",required:!0,defaultValue:s.title,placeholder:"Awesome announcement",autoFocus:!0}),e.jsx(r,{message:t.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"option",children:"Option"}),e.jsxs("select",{id:"option",name:"option",defaultValue:s.option||"",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select an option"}),e.jsx("option",{value:"Abhidh",children:"Abhidh"}),e.jsx("option",{value:"Abhidh Creative",children:"Abhidh Creative"}),e.jsx("option",{value:"Abhidh Academy",children:"Abhidh Academy"})]}),e.jsx(r,{message:t.option})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"image",children:"Cover image"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{htmlFor:"image",className:"inline-flex cursor-pointer items-center gap-2 rounded-md border px-3 py-2 text-sm hover:bg-muted",children:[e.jsx(k,{className:"h-4 w-4"}),"Choose image"]}),e.jsx("input",{id:"image",name:"image",type:"file",accept:"image/*",className:"hidden",onChange:v}),m&&e.jsx("img",{src:m,alt:"Preview",className:"h-12 w-16 rounded object-cover border"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG/JPG up to 2MB"}),e.jsx(r,{message:t.image})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"content",children:"Content"}),e.jsx(P,{value:j,onChange:p,placeholder:"Write your postâ€¦",name:"content"}),e.jsx(r,{message:t.content})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"hidden",name:"is_published",value:"0"}),e.jsx("input",{type:"checkbox",id:"is_published",name:"is_published",value:"1",className:"hidden peer",defaultChecked:s.is_published}),e.jsx(E,{"aria-label":"Publish",defaultChecked:s.is_published,onCheckedChange:a=>{const C=document.getElementById("is_published")?.closest("form"),u=document.getElementById("is_published");u&&(u.checked=a),b(a,C)}}),e.jsx(l,{htmlFor:"is_published",children:"Publish"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(x,{type:"date",name:"published_at",className:"w-[12.5rem]",defaultValue:s.published_at?s.published_at.slice(0,10):""})]})]}),e.jsx(r,{message:t.published_at})]}),e.jsxs(A,{className:"gap-2 sm:gap-0",children:[e.jsx(B,{asChild:!0,children:e.jsx(o,{type:"button",variant:"outline",disabled:i,children:"Cancel"})}),e.jsxs(o,{type:"submit",disabled:i,children:[i&&e.jsx(T,{className:"mr-2 h-4 w-4 animate-spin"}),"Update"]})]})]})})})]})}export{re as default};
