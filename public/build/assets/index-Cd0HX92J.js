import{u as A,r as n,b as m,j as e,H as R}from"./app-DnFC_eNL.js";import{A as B}from"./app-layout-CPQWTGmO.js";import{C as d}from"./CourseController-IFXHYWAo.js";import{T as D,a as E,b as j,c as i,d as H,e as a}from"./table-CKxRhu6d.js";import{P as M,a as V,b as g,d as U,c as $,e as q}from"./pagination-Cqpo1718.js";import{B as f}from"./button-rPaPehJE.js";import{I as z}from"./input-CHVdq988.js";import{S as v,a as N,b as _,c as S,d as l}from"./select-ssExcQiX.js";import{B as b}from"./badge-B_wMtSsn.js";import{c as F}from"./index-BkDfLQMe.js";import G from"./delete-rNjbxZb6.js";import"./app-D68BraIN.js";import"./index-CNKFNWvJ.js";import"./index-Cry_GVru.js";import"./index-CXkLwl-k.js";import"./index-Dw2Xby9W.js";import"./x-DqWHb4Jg.js";import"./createLucideIcon-RyHhqoDJ.js";import"./index-DaROCXso.js";import"./index-B1YdNjp7.js";import"./index-D0SzBiVj.js";import"./dropdown-menu-C6nasuCZ.js";import"./log-out-CGS9sCHj.js";import"./index-DTMMEruM.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-fyDU5RF6.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-f0rWim1W.js";import"./images-zKNtNZxa.js";import"./graduation-cap-CKuF5Oy3.js";import"./book-open-check-DnxrUPvp.js";import"./user-check-CKVwFk_t.js";import"./circle-user-round-CVoFbm53.js";import"./chevron-right-EpfWa7Hm.js";import"./chevron-left-C1cwCJ6G.js";import"./index-BAQiEn5O.js";import"./chevron-down-DTPvOuGB.js";import"./check-DtLexhFW.js";import"./chevron-up-DExuvaHM.js";import"./dialog-BPceDQJC.js";import"./trash-2-B5Bw4xnK.js";import"./loader-circle-BcRx3z9B.js";const O=[{title:"Courses",href:d.index().url}],w={guided:"Guided",self_paced:"Self-Paced"},J={guided:"bg-blue-500",self_paced:"bg-green-500"};function qe(){const{props:C}=A(),r=C.courses,p=n.useMemo(()=>{const s=new URL(window.location.href).searchParams;return{search:s.get("search")??"",course_type:s.get("course_type")??"all",program_id:s.get("program_id")??"all",perPage:s.get("per_page")??String(r.per_page||10)}},[r.per_page]),[x,P]=n.useState(p.search),[o,T]=n.useState(p.course_type),[c,y]=n.useState(p.program_id),[u,k]=n.useState(p.perPage);n.useEffect(()=>{const s=setTimeout(()=>h(1),350);return()=>clearTimeout(s)},[x,o,c,u]);const h=s=>{const t=new URLSearchParams;x&&t.set("search",x),o&&o!=="all"&&t.set("course_type",o),c&&c!=="all"&&t.set("program_id",c),u&&t.set("per_page",u),s&&s>1&&t.set("page",String(s));const L=`${d.index().url}${t.toString()?`?${t}`:""}`;m.visit(L,{preserveScroll:!0,preserveState:!0})},I=s=>{s&&m.visit(s,{preserveScroll:!0,preserveState:!0})};return e.jsxs(B,{breadcrumbs:O,children:[e.jsx(R,{title:"Courses"}),e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Courses"}),e.jsx(f,{onClick:()=>m.visit(d.create().url),children:"New Course"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{placeholder:"Search courses...",value:x,onChange:s=>P(s.target.value),className:"w-64"}),e.jsxs(v,{value:o,onValueChange:T,children:[e.jsx(N,{className:"w-40",children:e.jsx(_,{placeholder:"Type"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Types"}),Object.entries(w).map(([s,t])=>e.jsx(l,{value:s,children:t},s))]})]}),e.jsxs(v,{value:c,onValueChange:y,children:[e.jsx(N,{className:"w-48",children:e.jsx(_,{placeholder:"Program"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Programs"}),C.programs.map(s=>e.jsx(l,{value:String(s.id),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows"}),e.jsxs(v,{value:u,onValueChange:s=>k(s),children:[e.jsx(N,{className:"w-[90px]",children:e.jsx(_,{})}),e.jsxs(S,{children:[e.jsx(l,{value:"10",children:"10"}),e.jsx(l,{value:"20",children:"20"}),e.jsx(l,{value:"50",children:"50"})]})]})]})]}),e.jsx("div",{className:"rounded-xl border",children:e.jsxs(D,{children:[e.jsx(E,{children:e.jsxs(j,{children:[e.jsx(i,{className:"w-[30%]",children:"Title"}),e.jsx(i,{children:"Type"}),e.jsx(i,{children:"Program"}),e.jsx(i,{children:"Duration"}),e.jsx(i,{children:"Price"}),e.jsx(i,{children:"Enrollments"}),e.jsx(i,{children:"Created"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsxs(H,{children:[r.data.length===0&&e.jsx(j,{children:e.jsx(a,{colSpan:8,className:"text-center text-sm text-muted-foreground",children:"No courses found."})}),r.data.map(s=>e.jsxs(j,{children:[e.jsxs(a,{className:"font-medium",children:[e.jsx(f,{variant:"link",className:"p-0 h-auto font-medium",onClick:()=>m.visit(d.show.url(s.id)),children:s.title}),s.featured&&e.jsx(b,{variant:"default",className:"ml-2",children:"Featured"})]}),e.jsx(a,{children:e.jsx(b,{variant:"secondary",className:F("text-white",J[s.course_type]),children:w[s.course_type]})}),e.jsx(a,{children:s.program?e.jsx("span",{children:s.program.name}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(a,{children:s.duration||e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(a,{children:s.price!==null&&s.price!==void 0?e.jsxs("span",{className:"font-medium",children:["Rs. ",Math.round(s.price).toLocaleString("en-US")]}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(a,{children:e.jsxs(b,{variant:"outline",children:[s.enrollments_count," enrollments"]})}),e.jsx(a,{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs(a,{className:"text-right space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>m.visit(d.edit.url(s.id)),children:"Edit"}),e.jsx(G,{course:s})]})]},s.id))]})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 sm:flex-row",children:[e.jsxs("div",{className:"text-sm text-muted-foreground sm:text-left text-center w-full sm:w-auto",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*r.per_page+1})," ","–"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.current_page*r.per_page,r.total)})," ","of ",e.jsx("span",{className:"font-medium",children:r.total})," results"]}),e.jsx("div",{className:"sm:ml-auto",children:e.jsx(M,{children:e.jsxs(V,{children:[e.jsx(g,{children:e.jsx(U,{onClick:()=>h(r.current_page>1?r.current_page-1:null)})}),r.links.filter(s=>s.label!=="&laquo; Previous"&&s.label!=="Next &raquo;").map((s,t)=>e.jsx(g,{children:e.jsx($,{isActive:s.active,onClick:()=>I(s.url),dangerouslySetInnerHTML:{__html:s.label}})},t)),e.jsx(g,{children:e.jsx(q,{onClick:()=>h(r.current_page<r.last_page?r.current_page+1:null)})})]})})})]})]})]})}export{qe as default};
