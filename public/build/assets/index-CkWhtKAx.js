import{u as A,r as n,b as m,j as e,H as B}from"./app-DeyNhaIj.js";import{A as D}from"./app-layout-DKFYOApa.js";import{C as d}from"./CourseController-IFXHYWAo.js";import{T as E,a as H,b as j,c as i,d as R,e as a}from"./table-DC2sflY4.js";import{P as V,a as M,b as g,d as $,c as q,e as U}from"./pagination-2aUZidBf.js";import{B as f}from"./button-Po8_hoCj.js";import{I as z}from"./input-DYNUQEB0.js";import{S as v,a as N,b as _,c as S,d as l}from"./select-DgO_v8Hj.js";import{B as b}from"./badge-e4a7wIAz.js";import{c as F}from"./index-BK4guFTW.js";import G from"./delete-DW27YXOj.js";import"./app-D68BraIN.js";import"./index-87MTScox.js";import"./index-CdSBMCOc.js";import"./index-VNmnc6HY.js";import"./index-XU9KE0KS.js";import"./x-Cmss8qIq.js";import"./createLucideIcon-Duo5QKwh.js";import"./index-D3zOfROK.js";import"./index-PvPWVqt0.js";import"./index-B_izgXN0.js";import"./dropdown-menu-DnvfRfwY.js";import"./log-out-w465uie1.js";import"./index-DTMMEruM.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-DzV0efKj.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-CU0YDxj1.js";import"./images-DjtTIiaX.js";import"./graduation-cap-D_pR4mHR.js";import"./book-open-check-DVbQLFY6.js";import"./user-check-BVR11qX3.js";import"./circle-user-round-DQiPr9D3.js";import"./chevron-right-CJZ6vRnf.js";import"./chevron-left-Dz68Kb8V.js";import"./index-CVV1tXhf.js";import"./chevron-down-DNYYSYNe.js";import"./check-CtlYdAwC.js";import"./chevron-up-BPPvmrAA.js";import"./dialog-VLgjrFb4.js";import"./trash-2-D32PI3Pn.js";import"./loader-circle-3LwKL-vM.js";const O=[{title:"Courses",href:d.index().url}],w={guided:"Guided",self_paced:"Self-Paced"},J={guided:"bg-blue-500",self_paced:"bg-green-500"};function Ue(){const{props:C}=A(),r=C.courses,p=n.useMemo(()=>{const s=new URL(window.location.href).searchParams;return{search:s.get("search")??"",course_type:s.get("course_type")??"all",program_id:s.get("program_id")??"all",perPage:s.get("per_page")??String(r.per_page||10)}},[r.per_page]),[x,P]=n.useState(p.search),[o,T]=n.useState(p.course_type),[c,y]=n.useState(p.program_id),[u,k]=n.useState(p.perPage);n.useEffect(()=>{const s=setTimeout(()=>h(1),350);return()=>clearTimeout(s)},[x,o,c,u]);const h=s=>{const t=new URLSearchParams;x&&t.set("search",x),o&&o!=="all"&&t.set("course_type",o),c&&c!=="all"&&t.set("program_id",c),u&&t.set("per_page",u),s&&s>1&&t.set("page",String(s));const L=`${d.index().url}${t.toString()?`?${t}`:""}`;m.visit(L,{preserveScroll:!0,preserveState:!0})},I=s=>{s&&m.visit(s,{preserveScroll:!0,preserveState:!0})};return e.jsxs(D,{breadcrumbs:O,children:[e.jsx(B,{title:"Courses"}),e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Courses"}),e.jsx(f,{onClick:()=>m.visit(d.create().url),children:"New Course"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{placeholder:"Search courses...",value:x,onChange:s=>P(s.target.value),className:"w-64"}),e.jsxs(v,{value:o,onValueChange:T,children:[e.jsx(N,{className:"w-40",children:e.jsx(_,{placeholder:"Type"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Types"}),Object.entries(w).map(([s,t])=>e.jsx(l,{value:s,children:t},s))]})]}),e.jsxs(v,{value:c,onValueChange:y,children:[e.jsx(N,{className:"w-48",children:e.jsx(_,{placeholder:"Program"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All Programs"}),C.programs.map(s=>e.jsx(l,{value:String(s.id),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows"}),e.jsxs(v,{value:u,onValueChange:s=>k(s),children:[e.jsx(N,{className:"w-[90px]",children:e.jsx(_,{})}),e.jsxs(S,{children:[e.jsx(l,{value:"10",children:"10"}),e.jsx(l,{value:"20",children:"20"}),e.jsx(l,{value:"50",children:"50"})]})]})]})]}),e.jsx("div",{className:"rounded-xl border",children:e.jsxs(E,{children:[e.jsx(H,{children:e.jsxs(j,{children:[e.jsx(i,{className:"w-[30%]",children:"Title"}),e.jsx(i,{children:"Type"}),e.jsx(i,{children:"Program"}),e.jsx(i,{children:"Duration"}),e.jsx(i,{children:"Enrollments"}),e.jsx(i,{children:"Created"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsxs(R,{children:[r.data.length===0&&e.jsx(j,{children:e.jsx(a,{colSpan:7,className:"text-center text-sm text-muted-foreground",children:"No courses found."})}),r.data.map(s=>e.jsxs(j,{children:[e.jsxs(a,{className:"font-medium",children:[e.jsx(f,{variant:"link",className:"p-0 h-auto font-medium",onClick:()=>m.visit(d.show.url(s.id)),children:s.title}),s.featured&&e.jsx(b,{variant:"default",className:"ml-2",children:"Featured"})]}),e.jsx(a,{children:e.jsx(b,{variant:"secondary",className:F("text-white",J[s.course_type]),children:w[s.course_type]})}),e.jsx(a,{children:s.program?e.jsx("span",{children:s.program.name}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx(a,{children:s.duration||e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx(a,{children:e.jsxs(b,{variant:"outline",children:[s.enrollments_count," enrollments"]})}),e.jsx(a,{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs(a,{className:"text-right space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>m.visit(d.edit.url(s.id)),children:"Edit"}),e.jsx(G,{course:s})]})]},s.id))]})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 sm:flex-row",children:[e.jsxs("div",{className:"text-sm text-muted-foreground sm:text-left text-center w-full sm:w-auto",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*r.per_page+1})," ","â€“"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.current_page*r.per_page,r.total)})," ","of ",e.jsx("span",{className:"font-medium",children:r.total})," results"]}),e.jsx("div",{className:"sm:ml-auto",children:e.jsx(V,{children:e.jsxs(M,{children:[e.jsx(g,{children:e.jsx($,{onClick:()=>h(r.current_page>1?r.current_page-1:null)})}),r.links.filter(s=>s.label!=="&laquo; Previous"&&s.label!=="Next &raquo;").map((s,t)=>e.jsx(g,{children:e.jsx(q,{isActive:s.active,onClick:()=>I(s.url),dangerouslySetInnerHTML:{__html:s.label}})},t)),e.jsx(g,{children:e.jsx(U,{onClick:()=>h(r.current_page<r.last_page?r.current_page+1:null)})})]})})})]})]})]})}export{Ue as default};
