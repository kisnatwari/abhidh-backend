import{u as U,r as g,b as q,j as r,H as Y}from"./app-DeyNhaIj.js";import{A as B}from"./app-layout-DKFYOApa.js";import{q as y,a as v}from"./index-DW9AIAM8.js";import{T as W,a as z,b as w,c as p,d as J,e as h}from"./table-DC2sflY4.js";import{P as K,a as X,b as A,d as Z,c as ee,e as te}from"./pagination-2aUZidBf.js";import{I as re}from"./input-DYNUQEB0.js";import{S as D,a as C,b as E,c as I,d as x}from"./select-DgO_v8Hj.js";import{B as _}from"./badge-e4a7wIAz.js";import le from"./add-Cym3yrYo.js";import ie from"./edit-DtZvmYFU.js";import ae from"./delete-bsPP5WBj.js";import oe from"./view-9UZaXLEr.js";import{C as O}from"./circle-play-ibD1-AmL.js";import{I as se}from"./image-B0xc0u5o.js";import"./app-D68BraIN.js";import"./index-BK4guFTW.js";import"./index-87MTScox.js";import"./button-Po8_hoCj.js";import"./index-CdSBMCOc.js";import"./index-VNmnc6HY.js";import"./index-XU9KE0KS.js";import"./x-Cmss8qIq.js";import"./createLucideIcon-Duo5QKwh.js";import"./index-D3zOfROK.js";import"./index-PvPWVqt0.js";import"./index-B_izgXN0.js";import"./dropdown-menu-DnvfRfwY.js";import"./log-out-w465uie1.js";import"./index-DTMMEruM.js";import"./app-logo-icon-DzV0efKj.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./CourseController-IFXHYWAo.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-CU0YDxj1.js";import"./images-DjtTIiaX.js";import"./graduation-cap-D_pR4mHR.js";import"./book-open-check-DVbQLFY6.js";import"./user-check-BVR11qX3.js";import"./circle-user-round-DQiPr9D3.js";import"./chevron-right-CJZ6vRnf.js";import"./chevron-left-Dz68Kb8V.js";import"./index-CVV1tXhf.js";import"./chevron-down-DNYYSYNe.js";import"./check-CtlYdAwC.js";import"./chevron-up-BPPvmrAA.js";import"./dialog-VLgjrFb4.js";import"./label-C5nTzMn2.js";import"./input-error-9cFJtkRf.js";import"./rich-text-editor-BN0U7LEJ.js";import"./youtube-AkTWAnDJ.js";import"./loader-circle-3LwKL-vM.js";import"./trash-2-D32PI3Pn.js";const a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/galleries"};a.url=e=>a.definition.url+y(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const S=e=>({action:a.url(e),method:"get"});S.get=e=>({action:a.url(e),method:"get"});S.head=e=>({action:a.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});a.form=S;const o=e=>({url:o.url(e),method:"get"});o.definition={methods:["get","head"],url:"/galleries/create"};o.url=e=>o.definition.url+y(e);o.get=e=>({url:o.url(e),method:"get"});o.head=e=>({url:o.url(e),method:"head"});const P=e=>({action:o.url(e),method:"get"});P.get=e=>({action:o.url(e),method:"get"});P.head=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=P;const d=e=>({url:d.url(e),method:"post"});d.definition={methods:["post"],url:"/galleries"};d.url=e=>d.definition.url+y(e);d.post=e=>({url:d.url(e),method:"post"});const H=e=>({action:d.url(e),method:"post"});H.post=e=>({action:d.url(e),method:"post"});d.form=H;const s=(e,t)=>({url:s.url(e,t),method:"get"});s.definition={methods:["get","head"],url:"/galleries/{gallery}"};s.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={gallery:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={gallery:e.id}),Array.isArray(e)&&(e={gallery:e[0]}),e=v(e);const i={gallery:typeof e.gallery=="object"?e.gallery.id:e.gallery};return s.definition.url.replace("{gallery}",i.gallery.toString()).replace(/\/+$/,"")+y(t)};s.get=(e,t)=>({url:s.url(e,t),method:"get"});s.head=(e,t)=>({url:s.url(e,t),method:"head"});const Q=(e,t)=>({action:s.url(e,t),method:"get"});Q.get=(e,t)=>({action:s.url(e,t),method:"get"});Q.head=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});s.form=Q;const n=(e,t)=>({url:n.url(e,t),method:"get"});n.definition={methods:["get","head"],url:"/galleries/{gallery}/edit"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={gallery:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={gallery:e.id}),Array.isArray(e)&&(e={gallery:e[0]}),e=v(e);const i={gallery:typeof e.gallery=="object"?e.gallery.id:e.gallery};return n.definition.url.replace("{gallery}",i.gallery.toString()).replace(/\/+$/,"")+y(t)};n.get=(e,t)=>({url:n.url(e,t),method:"get"});n.head=(e,t)=>({url:n.url(e,t),method:"head"});const T=(e,t)=>({action:n.url(e,t),method:"get"});T.get=(e,t)=>({action:n.url(e,t),method:"get"});T.head=(e,t)=>({action:n.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});n.form=T;const c=(e,t)=>({url:c.url(e,t),method:"delete"});c.definition={methods:["delete"],url:"/galleries/{gallery}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={gallery:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={gallery:e.id}),Array.isArray(e)&&(e={gallery:e[0]}),e=v(e);const i={gallery:typeof e.gallery=="object"?e.gallery.id:e.gallery};return c.definition.url.replace("{gallery}",i.gallery.toString()).replace(/\/+$/,"")+y(t)};c.delete=(e,t)=>({url:c.url(e,t),method:"delete"});const L=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});L.delete=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});c.form=L;const m=(e,t)=>({url:m.url(e,t),method:"post"});m.definition={methods:["post"],url:"/galleries/{gallery}"};m.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={gallery:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={gallery:e.id}),Array.isArray(e)&&(e={gallery:e[0]}),e=v(e);const i={gallery:typeof e.gallery=="object"?e.gallery.id:e.gallery};return m.definition.url.replace("{gallery}",i.gallery.toString()).replace(/\/+$/,"")+y(t)};m.post=(e,t)=>({url:m.url(e,t),method:"post"});const $=(e,t)=>({action:m.url(e,t),method:"post"});$.post=(e,t)=>({action:m.url(e,t),method:"post"});m.form=$;const G={index:Object.assign(a,a),create:Object.assign(o,o),store:Object.assign(d,d),show:Object.assign(s,s),edit:Object.assign(n,n),destroy:Object.assign(c,c),update:Object.assign(m,m)},ne=[{title:"Galleries",href:G.index().url}];function xt(){const{props:e}=U(),t=e.galleries,i=g.useMemo(()=>{const l=new URL(window.location.href).searchParams;return{search:l.get("search")??"",option:l.get("option")??"all",perPage:l.get("per_page")??String(t.per_page||10)}},[t.per_page]),[j,F]=g.useState(i.search),[f,k]=g.useState(i.option),[b,M]=g.useState(i.perPage);g.useEffect(()=>{const l=setTimeout(()=>N(1),350);return()=>clearTimeout(l)},[j,f,b]);const N=l=>{const u=new URLSearchParams;j&&u.set("search",j),f&&f!=="all"&&u.set("option",f),b&&u.set("per_page",b),l&&l>1&&u.set("page",String(l));const V=`${G.index().url}${u.toString()?`?${u}`:""}`;q.visit(V,{preserveScroll:!0,preserveState:!0})},R=l=>{l&&q.visit(l,{preserveScroll:!0,preserveState:!0})};return r.jsxs(B,{breadcrumbs:ne,children:[r.jsx(Y,{title:"Galleries"}),r.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Galleries"}),r.jsx(le,{})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{placeholder:"Search galleries...",value:j,onChange:l=>F(l.target.value),className:"w-64"}),r.jsxs(D,{value:f,onValueChange:k,children:[r.jsx(C,{className:"w-48",children:r.jsx(E,{placeholder:"Option"})}),r.jsxs(I,{children:[r.jsx(x,{value:"all",children:"All Options"}),r.jsx(x,{value:"Abhidh",children:"Abhidh"}),r.jsx(x,{value:"Abhidh Creative",children:"Abhidh Creative"}),r.jsx(x,{value:"Abhidh Academy",children:"Abhidh Academy"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows"}),r.jsxs(D,{value:b,onValueChange:l=>M(l),children:[r.jsx(C,{className:"w-[90px]",children:r.jsx(E,{})}),r.jsxs(I,{children:[r.jsx(x,{value:"10",children:"10"}),r.jsx(x,{value:"20",children:"20"}),r.jsx(x,{value:"50",children:"50"})]})]})]})]}),r.jsx("div",{className:"rounded-xl border",children:r.jsxs(W,{children:[r.jsx(z,{children:r.jsxs(w,{children:[r.jsx(p,{className:"w-[200px]",children:"Preview"}),r.jsx(p,{className:"w-[30%]",children:"Title"}),r.jsx(p,{children:"Description"}),r.jsx(p,{children:"Option"}),r.jsx(p,{children:"Media"}),r.jsx(p,{children:"Created"}),r.jsx(p,{className:"text-right",children:"Actions"})]})}),r.jsxs(J,{children:[t.data.length===0&&r.jsx(w,{children:r.jsx(h,{colSpan:7,className:"text-center text-sm text-muted-foreground",children:"No galleries found."})}),t.data.map(l=>r.jsxs(w,{children:[r.jsx(h,{children:l.media_type==="youtube"&&l.youtube_url?r.jsx(ce,{url:l.youtube_url}):r.jsx(de,{photos:l.photos})}),r.jsx(h,{className:"font-medium",children:r.jsx(oe,{gallery:l,trigger:r.jsx("span",{className:"hover:underline cursor-pointer",children:l.title})})}),r.jsx(h,{children:r.jsx("div",{className:"max-w-xs truncate",children:l.description?r.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:l.description.replace(/<[^>]*>/g,"").substring(0,100)+"..."}}):"—"})}),r.jsx(h,{children:l.option?r.jsx(_,{variant:"outline",children:l.option}):"—"}),r.jsx(h,{children:l.media_type==="youtube"?r.jsxs(_,{variant:"secondary",className:"flex items-center gap-1",children:[r.jsx(O,{className:"h-3 w-3"})," Video"]}):r.jsxs(_,{variant:"secondary",children:[l.photos.length," photos"]})}),r.jsx(h,{children:new Date(l.created_at).toLocaleDateString()}),r.jsxs(h,{className:"text-right space-x-2",children:[r.jsx(ie,{gallery:l}),r.jsx(ae,{gallery:l})]})]},l.id))]})]})}),t.last_page>1&&r.jsxs("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 sm:flex-row",children:[r.jsxs("div",{className:"text-sm text-muted-foreground sm:text-left text-center w-full sm:w-auto",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(t.current_page-1)*t.per_page+1})," ","–"," ",r.jsx("span",{className:"font-medium",children:Math.min(t.current_page*t.per_page,t.total)})," ","of ",r.jsx("span",{className:"font-medium",children:t.total})," results"]}),r.jsx("div",{className:"sm:ml-auto",children:r.jsx(K,{children:r.jsxs(X,{children:[r.jsx(A,{children:r.jsx(Z,{onClick:()=>N(t.current_page>1?t.current_page-1:null)})}),t.links.filter(l=>l.label!=="&laquo; Previous"&&l.label!=="Next &raquo;").map((l,u)=>r.jsx(A,{children:r.jsx(ee,{isActive:l.active,onClick:()=>R(l.url),dangerouslySetInnerHTML:{__html:l.label}})},u)),r.jsx(A,{children:r.jsx(te,{onClick:()=>N(t.current_page<t.last_page?t.current_page+1:null)})})]})})})]})]})]})}function de({photos:e}){return!e||e.length===0?r.jsx("div",{className:"h-12 w-20 rounded border bg-muted/40 flex items-center justify-center text-muted-foreground",children:r.jsx(se,{className:"h-4 w-4"})}):r.jsxs("div",{className:"flex gap-1",children:[e.slice(0,3).map((t,i)=>r.jsx("img",{src:t.photo_url,alt:t.caption||`Photo ${i+1}`,className:"h-12 w-12 rounded object-cover border"},t.id)),e.length>3&&r.jsx("div",{className:"h-12 w-12 rounded border bg-muted/50 flex items-center justify-center",children:r.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.length-3]})})]})}function ce({url:e}){const t=me(e),i=t?`https://img.youtube.com/vi/${t}/hqdefault.jpg`:null;return r.jsxs("div",{className:"relative h-12 w-20 overflow-hidden rounded border",children:[i?r.jsx("img",{src:i,alt:"YouTube thumbnail",className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-muted/40 flex items-center justify-center text-muted-foreground text-[10px]",children:"YouTube"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:r.jsx(O,{className:"h-5 w-5 text-white"})})]})}function me(e){try{const t=new URL(e);if(t.hostname==="youtu.be")return t.pathname.replace("/","")||null;if(t.searchParams.has("v"))return t.searchParams.get("v");if(t.pathname.startsWith("/embed/"))return t.pathname.split("/")[2]??null}catch{return null}return null}export{xt as default};
