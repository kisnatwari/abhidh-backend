import{u as Z,r as b,b as E,j as r,H as ee}from"./app-DnFC_eNL.js";import{A as te}from"./app-layout-CPQWTGmO.js";import{q as f,a as g}from"./index-DW9AIAM8.js";import{C as re}from"./CourseController-IFXHYWAo.js";import{T as ne,a as le,b as Q,c as y,d as oe,e as x}from"./table-CKxRhu6d.js";import{P as ie,a as se,b as C,d as me,c as ae,e as de}from"./pagination-Cqpo1718.js";import{B as ce}from"./button-rPaPehJE.js";import{I as ue}from"./input-CHVdq988.js";import{S as q,a as T,b as D,c as O,d as j}from"./select-ssExcQiX.js";import{B as v}from"./badge-B_wMtSsn.js";import{c as pe}from"./index-BkDfLQMe.js";import he from"./actions-menu-CsgcIbRu.js";import fe from"./view-BhWARuMj.js";import{f as xe}from"./formatDistanceToNow-Bfdiy1JH.js";import"./app-D68BraIN.js";import"./index-CNKFNWvJ.js";import"./index-Cry_GVru.js";import"./index-CXkLwl-k.js";import"./index-Dw2Xby9W.js";import"./x-DqWHb4Jg.js";import"./createLucideIcon-RyHhqoDJ.js";import"./index-DaROCXso.js";import"./index-B1YdNjp7.js";import"./index-D0SzBiVj.js";import"./dropdown-menu-C6nasuCZ.js";import"./log-out-CGS9sCHj.js";import"./index-DTMMEruM.js";import"./app-logo-icon-fyDU5RF6.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-f0rWim1W.js";import"./images-zKNtNZxa.js";import"./graduation-cap-CKuF5Oy3.js";import"./book-open-check-DnxrUPvp.js";import"./user-check-CKVwFk_t.js";import"./circle-user-round-CVoFbm53.js";import"./chevron-right-EpfWa7Hm.js";import"./chevron-left-C1cwCJ6G.js";import"./index-BAQiEn5O.js";import"./chevron-down-DTPvOuGB.js";import"./check-DtLexhFW.js";import"./chevron-up-DExuvaHM.js";import"./edit-Vn6dqERk.js";import"./dialog-BPceDQJC.js";import"./label-CL8gTQN-.js";import"./switch-DK-5hmxD.js";import"./input-error-BW0P0i6f.js";import"./loader-circle-BcRx3z9B.js";import"./delete-S-RiIx_B.js";import"./eye-qenwXw_6.js";import"./circle-check-DeiKBMlD.js";import"./circle-x-4KKWSW20.js";import"./square-pen-Cnz_-5Et.js";import"./trash-2-B5Bw4xnK.js";import"./separator-Curq--ec.js";import"./mail-D70W53XR.js";import"./book-open-StTmkZBq.js";import"./calendar-Xs_JxOu3.js";import"./clock-Bmv4qGzy.js";import"./en-US-DzAkKII6.js";const o=e=>({url:o.url(e),method:"get"});o.definition={methods:["get","head"],url:"/enrollments"};o.url=e=>o.definition.url+f(e);o.get=e=>({url:o.url(e),method:"get"});o.head=e=>({url:o.url(e),method:"head"});const F=e=>({action:o.url(e),method:"get"});F.get=e=>({action:o.url(e),method:"get"});F.head=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=F;const i=e=>({url:i.url(e),method:"get"});i.definition={methods:["get","head"],url:"/enrollments/create"};i.url=e=>i.definition.url+f(e);i.get=e=>({url:i.url(e),method:"get"});i.head=e=>({url:i.url(e),method:"head"});const H=e=>({action:i.url(e),method:"get"});H.get=e=>({action:i.url(e),method:"get"});H.head=e=>({action:i.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});i.form=H;const d=e=>({url:d.url(e),method:"post"});d.definition={methods:["post"],url:"/enrollments"};d.url=e=>d.definition.url+f(e);d.post=e=>({url:d.url(e),method:"post"});const k=e=>({action:d.url(e),method:"post"});k.post=e=>({action:d.url(e),method:"post"});d.form=k;const s=(e,t)=>({url:s.url(e,t),method:"get"});s.definition={methods:["get","head"],url:"/enrollments/{enrollment}"};s.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return s.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};s.get=(e,t)=>({url:s.url(e,t),method:"get"});s.head=(e,t)=>({url:s.url(e,t),method:"head"});const L=(e,t)=>({action:s.url(e,t),method:"get"});L.get=(e,t)=>({action:s.url(e,t),method:"get"});L.head=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});s.form=L;const m=(e,t)=>({url:m.url(e,t),method:"get"});m.definition={methods:["get","head"],url:"/enrollments/{enrollment}/edit"};m.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return m.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};m.get=(e,t)=>({url:m.url(e,t),method:"get"});m.head=(e,t)=>({url:m.url(e,t),method:"head"});const V=(e,t)=>({action:m.url(e,t),method:"get"});V.get=(e,t)=>({action:m.url(e,t),method:"get"});V.head=(e,t)=>({action:m.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});m.form=V;const c=(e,t)=>({url:c.url(e,t),method:"delete"});c.definition={methods:["delete"],url:"/enrollments/{enrollment}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return c.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};c.delete=(e,t)=>({url:c.url(e,t),method:"delete"});const B=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});B.delete=(e,t)=>({action:c.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...t?.query??t?.mergeQuery??{}}}),method:"post"});c.form=B;const u=(e,t)=>({url:u.url(e,t),method:"post"});u.definition={methods:["post"],url:"/enrollments/{enrollment}"};u.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return u.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};u.post=(e,t)=>({url:u.url(e,t),method:"post"});const R=(e,t)=>({action:u.url(e,t),method:"post"});R.post=(e,t)=>({action:u.url(e,t),method:"post"});u.form=R;const p=(e,t)=>({url:p.url(e,t),method:"post"});p.definition={methods:["post"],url:"/enrollments/{enrollment}/verify"};p.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return p.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};p.post=(e,t)=>({url:p.url(e,t),method:"post"});const U=(e,t)=>({action:p.url(e,t),method:"post"});U.post=(e,t)=>({action:p.url(e,t),method:"post"});p.form=U;const h=(e,t)=>({url:h.url(e,t),method:"post"});h.definition={methods:["post"],url:"/enrollments/{enrollment}/unverify"};h.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={enrollment:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={enrollment:e.id}),Array.isArray(e)&&(e={enrollment:e[0]}),e=g(e);const l={enrollment:typeof e.enrollment=="object"?e.enrollment.id:e.enrollment};return h.definition.url.replace("{enrollment}",l.enrollment.toString()).replace(/\/+$/,"")+f(t)};h.post=(e,t)=>({url:h.url(e,t),method:"post"});const M=(e,t)=>({action:h.url(e,t),method:"post"});M.post=(e,t)=>({action:h.url(e,t),method:"post"});h.form=M;const z={index:Object.assign(o,o),create:Object.assign(i,i),store:Object.assign(d,d),show:Object.assign(s,s),edit:Object.assign(m,m),destroy:Object.assign(c,c),update:Object.assign(u,u),verify:Object.assign(p,p),unverify:Object.assign(h,h)},I={active:"Active",completed:"Completed",dropped:"Dropped"},je={active:"bg-green-500",completed:"bg-blue-500",dropped:"bg-red-500"},ye=[{title:"Enrollments",href:z.index().url}];function Ct(){const{props:e}=Z(),t=e.enrollments,l=e.courses,$=e.users,_=b.useMemo(()=>{const n=new URL(window.location.href).searchParams;return{search:n.get("search")??"",status:n.get("status")??"all",isPaid:n.get("is_paid")??"all",perPage:n.get("per_page")??String(t.per_page||10)}},[t.per_page]),[S,G]=b.useState(_.search),[N,J]=b.useState(_.status),[A,K]=b.useState(_.isPaid),[w,W]=b.useState(_.perPage);b.useEffect(()=>{const n=setTimeout(()=>P(1),350);return()=>clearTimeout(n)},[S,N,A,w]);const P=n=>{const a=new URLSearchParams;S&&a.set("search",S),N&&N!=="all"&&a.set("status",N),A&&A!=="all"&&a.set("is_paid",A),w&&a.set("per_page",w),n&&n>1&&a.set("page",String(n));const Y=`${z.index().url}${a.toString()?`?${a}`:""}`;E.visit(Y,{preserveScroll:!0,preserveState:!0})},X=n=>{n&&E.visit(n,{preserveScroll:!0,preserveState:!0})};return r.jsxs(te,{breadcrumbs:ye,children:[r.jsx(ee,{title:"Enrollments"}),r.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Enrollments"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enrollments are created when users submit payment screenshots via API. Verify payments to auto-enroll users."})]})}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ue,{placeholder:"Search enrollments...",value:S,onChange:n=>G(n.target.value),className:"w-64"}),r.jsxs(q,{value:N,onValueChange:J,children:[r.jsx(T,{className:"w-32",children:r.jsx(D,{placeholder:"Status"})}),r.jsxs(O,{children:[r.jsx(j,{value:"all",children:"All Status"}),Object.entries(I).map(([n,a])=>r.jsx(j,{value:n,children:a},n))]})]}),r.jsxs(q,{value:A,onValueChange:K,children:[r.jsx(T,{className:"w-32",children:r.jsx(D,{placeholder:"Payment"})}),r.jsxs(O,{children:[r.jsx(j,{value:"all",children:"All"}),r.jsx(j,{value:"1",children:"Paid"}),r.jsx(j,{value:"0",children:"Unpaid"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows"}),r.jsxs(q,{value:w,onValueChange:n=>W(n),children:[r.jsx(T,{className:"w-[90px]",children:r.jsx(D,{})}),r.jsxs(O,{children:[r.jsx(j,{value:"10",children:"10"}),r.jsx(j,{value:"20",children:"20"}),r.jsx(j,{value:"50",children:"50"})]})]})]})]}),r.jsx("div",{className:"rounded-xl border",children:r.jsxs(ne,{children:[r.jsx(le,{children:r.jsxs(Q,{children:[r.jsx(y,{className:"w-[20%]",children:"Student"}),r.jsx(y,{className:"w-[20%]",children:"Course"}),r.jsx(y,{children:"Program"}),r.jsx(y,{children:"Payment"}),r.jsx(y,{children:"Verification"}),r.jsx(y,{children:"Enrolled"}),r.jsx(y,{className:"w-[50px] text-center",children:"Actions"})]})}),r.jsxs(oe,{children:[t.data.length===0&&r.jsx(Q,{children:r.jsx(x,{colSpan:8,className:"text-center text-sm text-muted-foreground",children:"No enrollments found."})}),t.data.map(n=>r.jsxs(Q,{children:[r.jsxs(x,{className:"font-medium",children:[r.jsx(fe,{enrollment:n,courses:l,users:$,trigger:r.jsx("span",{className:"hover:underline cursor-pointer",children:n.user.name})}),r.jsx("div",{className:"text-sm text-muted-foreground",children:n.user.email})]}),r.jsx(x,{children:n.course?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(ce,{variant:"link",className:"p-0 h-auto font-medium text-left",onClick:()=>E.visit(re.show.url(n.course.id)),children:n.course.title}),r.jsx(v,{variant:"secondary",className:pe("w-fit text-white",je[n.status]),children:I[n.status]})]}):r.jsx("span",{className:"text-muted-foreground",children:"N/A"})}),r.jsx(x,{children:n.course?.program?r.jsx(v,{variant:"outline",children:n.course.program.name}):r.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),r.jsxs(x,{children:[n.is_paid?r.jsx(v,{variant:"default",children:"Paid"}):r.jsx(v,{variant:"outline",children:"Unpaid"}),n.payment_screenshot_url&&r.jsx("div",{className:"mt-1",children:r.jsx("a",{href:n.payment_screenshot_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View Screenshot"})})]}),r.jsxs(x,{children:[n.payment_verified?r.jsx(v,{variant:"secondary",className:"text-white bg-green-600",children:"Verified"}):n.payment_screenshot_path?r.jsx(v,{variant:"secondary",className:"text-white bg-yellow-600",children:"Pending"}):r.jsx(v,{variant:"outline",children:"No Screenshot"}),n.verified_by&&r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["by ",n.verified_by.name]})]}),r.jsx(x,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-foreground",children:new Date(n.enrollment_date).toLocaleString()}),r.jsx("span",{className:"text-xs text-muted-foreground",children:xe(new Date(n.enrollment_date),{addSuffix:!0})})]})}),r.jsx(x,{className:"text-center",children:r.jsx(he,{enrollment:n,courses:l,users:$})})]},n.id))]})]})}),t.last_page>1&&r.jsxs("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 sm:flex-row",children:[r.jsxs("div",{className:"text-sm text-muted-foreground sm:text-left text-center w-full sm:w-auto",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(t.current_page-1)*t.per_page+1})," ","â€“"," ",r.jsx("span",{className:"font-medium",children:Math.min(t.current_page*t.per_page,t.total)})," ","of ",r.jsx("span",{className:"font-medium",children:t.total})," results"]}),r.jsx("div",{className:"sm:ml-auto",children:r.jsx(ie,{children:r.jsxs(se,{children:[r.jsx(C,{children:r.jsx(me,{onClick:()=>P(t.current_page>1?t.current_page-1:null)})}),t.links.filter(n=>n.label!=="&laquo; Previous"&&n.label!=="Next &raquo;").map((n,a)=>r.jsx(C,{children:r.jsx(ae,{isActive:n.active,onClick:()=>X(n.url),dangerouslySetInnerHTML:{__html:n.label}})},a)),r.jsx(C,{children:r.jsx(de,{onClick:()=>P(t.current_page<t.last_page?t.current_page+1:null)})})]})})})]})]})]})}export{Ct as default};
