import{u as U,r as n,b as o,j as e,H as I}from"./app-Bgxzhrvc.js";import{A as L}from"./app-layout-CT189y1p.js";import{T as E,a as R,b as u,c as i,d as V,e as t}from"./table-CKJR3VTH.js";import{P as $,a as B,b as j,d as H,c as F,e as O}from"./pagination-DaBhj111.js";import{B as q}from"./button-2PUVNpYc.js";import{I as z}from"./input-B3PHjxIm.js";import{S as G,a as J,b as K,c as Q,d as f}from"./select-eSxMpkvs.js";import W from"./view-C1pnrtQT.js";import{B as g}from"./badge-COGybBTW.js";import X from"./invite-admin-dialog-sv8nrBjW.js";import{A as w,a as b,b as S}from"./alert-vLdJ5lIS.js";import{D as Y,a as Z,b as ee,c as v,d as se}from"./dropdown-menu-BquuMAtw.js";import{C as re}from"./circle-user-round-Ct2jiSYs.js";import{c as _}from"./createLucideIcon-BU9_NwhO.js";import{S as te}from"./shield-check-XrSf_XCT.js";import{T as ae}from"./trash-2-Du2-C_M2.js";import"./app-h36GOZo8.js";import"./index-5AvLgYyg.js";import"./index-DzWfvSAt.js";import"./index-Np49ePWI.js";import"./index-DdyAvwB5.js";import"./index-Daeha8jH.js";import"./x-BCrVPaUR.js";import"./index-BNpA7cIy.js";import"./index-BWC38D-R.js";import"./index-DJFfSsPm.js";import"./log-out-BTFO_Ir2.js";import"./index-DTMMEruM.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-H5NLi0sV.js";import"./BlogController-BN_QdlpY.js";import"./TrainerController-kQzDYQyR.js";import"./GalleryController-DimcFaM-.js";import"./ProgramController-CdHtV-DA.js";import"./ServiceController-DioFTMLC.js";import"./CourseController-IFXHYWAo.js";import"./EnrollmentController-nChSkhQE.js";import"./TeamController-DcRrgKb3.js";import"./users-DMU_DphB.js";import"./images-1y6J0UPH.js";import"./graduation-cap-BuMJYJEB.js";import"./book-open-check-pTXhZ5_H.js";import"./user-check-BqbDY3W7.js";import"./chevron-right-C2g-mDCD.js";import"./chevron-left-Drbz1378.js";import"./index-BK3Sl8pL.js";import"./chevron-down-DzLhHXXM.js";import"./check-CYIf4FlW.js";import"./chevron-up-C5vaA1vC.js";import"./dialog-DyAeqWL_.js";import"./label-HpvW4xIi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],le=_("EllipsisVertical",ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],oe=_("ShieldOff",ne),ce=[{title:"Users",href:"/users"}];function ns(){const{props:p}=U(),r=p.users,c=p.flash,y=p.auth?.user?.id??null,N=n.useMemo(()=>{const s=new URL(window.location.href).searchParams;return{search:s.get("search")??"",perPage:s.get("per_page")??String(r.per_page||10)}},[r.per_page]),[d,k]=n.useState(N.search),[m,C]=n.useState(N.perPage),[x,l]=n.useState(null);n.useEffect(()=>{const s=setTimeout(()=>h(1),350);return()=>clearTimeout(s)},[d,m]);const h=s=>{const a=new URLSearchParams;d&&a.set("search",d),m&&a.set("per_page",m),s&&s>1&&a.set("page",String(s));const M=`/users${a.toString()?`?${a}`:""}`;o.visit(M,{preserveScroll:!0,preserveState:!0})},P=s=>{l(s),o.post(`/users/${s}/verify`,{},{preserveScroll:!0,onFinish:()=>l(null)})},T=s=>{l(s),o.post(`/users/${s}/unverify`,{},{preserveScroll:!0,onFinish:()=>l(null)})},A=s=>{window.confirm("Are you sure you want to delete this user? This action cannot be undone.")&&(l(s),o.delete(`/users/${s}`,{preserveScroll:!0,onFinish:()=>l(null)}))},D=s=>{s&&o.visit(s,{preserveScroll:!0,preserveState:!0})};return e.jsxs(L,{breadcrumbs:ce,children:[e.jsx(I,{title:"Users"}),e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Users"}),e.jsx(X,{})]}),c?.success&&e.jsxs(w,{variant:"default",className:"border-emerald-200 bg-emerald-50 text-emerald-700",children:[e.jsx(b,{className:"font-semibold",children:"Success"}),e.jsx(S,{children:c.success})]}),c?.error&&e.jsxs(w,{variant:"destructive",children:[e.jsx(b,{className:"font-semibold",children:"Email could not be sent"}),e.jsx(S,{children:c.error})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{placeholder:"Search name or email...",value:d,onChange:s=>k(s.target.value),className:"w-64"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows"}),e.jsxs(G,{value:m,onValueChange:s=>C(s),children:[e.jsx(J,{className:"w-[90px]",children:e.jsx(K,{})}),e.jsxs(Q,{children:[e.jsx(f,{value:"10",children:"10"}),e.jsx(f,{value:"20",children:"20"}),e.jsx(f,{value:"50",children:"50"})]})]})]})]}),e.jsx("div",{className:"rounded-xl border",children:e.jsxs(E,{children:[e.jsx(R,{children:e.jsxs(u,{children:[e.jsx(i,{className:"w-[80px]",children:"Avatar"}),e.jsx(i,{className:"w-[30%]",children:"Name"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"API Tokens"}),e.jsx(i,{children:"Created"}),e.jsx(i,{})]})}),e.jsxs(V,{children:[r.data.length===0&&e.jsx(u,{children:e.jsx(t,{colSpan:7,className:"text-center text-sm text-muted-foreground",children:"No users found."})}),r.data.map(s=>e.jsxs(u,{children:[e.jsx(t,{children:e.jsx("div",{className:"h-12 w-12 rounded-full border bg-muted/50 flex items-center justify-center",children:e.jsx(re,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsx(t,{className:"font-medium",children:e.jsx(W,{user:s,trigger:e.jsx("span",{className:"hover:underline cursor-pointer",children:s.name})})}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.email_verified_at?e.jsx(g,{variant:"secondary",className:"text-white bg-green-600",children:"Verified"}):e.jsx(g,{variant:"secondary",className:"text-white bg-gray-500",children:"Unverified"})}),e.jsx(t,{children:e.jsxs(g,{variant:"outline",children:[s.tokens_count," tokens"]})}),e.jsx(t,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(t,{children:e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Open actions",children:e.jsx(le,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",className:"w-48",children:[e.jsxs(v,{onClick:()=>P(s.id),disabled:x===s.id||!!s.email_verified_at,children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Mark as verified"]}),e.jsxs(v,{onClick:()=>T(s.id),disabled:x===s.id||!s.email_verified_at,children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Remove verification"]}),e.jsx(se,{}),e.jsxs(v,{onClick:()=>A(s.id),disabled:x===s.id||y===s.id,className:"text-red-600 focus:text-red-600",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Delete user"]})]})]})})]},s.id))]})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 sm:flex-row",children:[e.jsxs("div",{className:"text-sm text-muted-foreground sm:text-left text-center w-full sm:w-auto",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*r.per_page+1})," ","â€“"," ",e.jsx("span",{className:"font-medium",children:Math.min(r.current_page*r.per_page,r.total)})," ","of ",e.jsx("span",{className:"font-medium",children:r.total})," results"]}),e.jsx("div",{className:"sm:ml-auto",children:e.jsx($,{children:e.jsxs(B,{children:[e.jsx(j,{children:e.jsx(H,{onClick:()=>h(r.current_page>1?r.current_page-1:null)})}),r.links.filter(s=>s.label!=="&laquo; Previous"&&s.label!=="Next &raquo;").map((s,a)=>e.jsx(j,{children:e.jsx(F,{isActive:s.active,onClick:()=>D(s.url),dangerouslySetInnerHTML:{__html:s.label}})},a)),e.jsx(j,{children:e.jsx(O,{onClick:()=>h(r.current_page<r.last_page?r.current_page+1:null)})})]})})})]})]})]})}export{ns as default};
