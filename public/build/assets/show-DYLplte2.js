import{r as m,j as e,H as Y,L as q,b as G}from"./app-DnFC_eNL.js";import{S as J}from"./student-dashboard-layout-CANkBImq.js";import{C as p,a as u}from"./card-D2JJ7whv.js";import{B as _}from"./badge-B_wMtSsn.js";import{B as b}from"./button-rPaPehJE.js";import{c as M}from"./index-BkDfLQMe.js";import{A as V}from"./arrow-left-CCvMUDLF.js";import{S as E}from"./sparkles-BD_D-C2s.js";import{C as k}from"./clock-Bmv4qGzy.js";import{C as f}from"./circle-check-big-BjKHcprM.js";import{B as Q}from"./book-open-StTmkZBq.js";import{c as O}from"./createLucideIcon-RyHhqoDJ.js";import{B as W}from"./book-open-check-DnxrUPvp.js";import{f as X}from"./formatDistanceToNow-Bfdiy1JH.js";import"./app-D68BraIN.js";import"./graduation-cap-CKuF5Oy3.js";import"./user-check-CKVwFk_t.js";import"./log-out-CGS9sCHj.js";import"./index-CNKFNWvJ.js";import"./en-US-DzAkKII6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],ee=O("LayoutList",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],C=O("Play",se),te={active:"Active",completed:"Completed",dropped:"Dropped"},R={not_started:"Not started",in_progress:"In progress",completed:"Completed"},ae={not_started:"text-slate-500 bg-slate-100 border-slate-200",in_progress:"text-amber-600 bg-amber-50 border-amber-200",completed:"text-emerald-600 bg-emerald-50 border-emerald-200"},re={not_started:k,in_progress:C,completed:f};function Ce({enrollment:t}){const g=t.enrollmentDate?new Date(t.enrollmentDate):null,F=te[t.status]??t.status,c=t.course?.courseType==="self_paced",x=!!(c&&t.course?.contentLocked),T=t.course?.lockReason??"Your payment proof is awaiting verification. Lessons unlock automatically once the academy team approves your submission.",$=m.useMemo(()=>(t.course?.progress?.items??[]).filter(s=>s!==null&&typeof s=="object"&&typeof s.order=="number"&&typeof s.status=="string"),[t.course?.progress?.items]),i=m.useMemo(()=>t.course?.progress?.summary??null,[t.course?.progress?.summary]),A=m.useMemo(()=>$.reduce((s,a)=>(s[a.order]=a,s),{}),[$]),l=m.useMemo(()=>!c||!t.course?.topics?[]:t.course.topics.filter(s=>s!==null&&typeof s=="object").map((s,a)=>{const o=typeof s.order=="number"?s.order:a,h=A[o];return{...s,title:s.title??`Topic ${a+1}`,order:o,status:h?.status??"not_started",lastViewedAt:h?.lastViewedAt??null,completedAt:h?.completedAt??null,subtopics:Array.isArray(s.subtopics)?s.subtopics.filter(Boolean):[]}}).sort((s,a)=>s.order-a.order),[t.course?.topics,c,A]),B=m.useMemo(()=>c||!t.course?.syllabus?[]:t.course.syllabus.filter(s=>s!==null&&typeof s=="object").map((s,a)=>({...s,session:s.session??a+1,course_topic:s.course_topic??`Session ${a+1}`,learnings:Array.isArray(s.learnings)?s.learnings.filter(Boolean):[],activities:Array.isArray(s.activities)?s.activities.filter(Boolean):[]})),[t.course?.syllabus,c]),[n,d]=m.useState(0),[y,I]=m.useState(null);m.useEffect(()=>{if(!c){d(0);return}if(x){d(0);return}if(typeof i?.nextTopic?.order=="number"){const s=Math.min(i.nextTopic.order,Math.max(l.length-1,0));d(s);return}l.length>0?d(Math.max(l.length-1,0)):d(0)},[c,x,i?.nextTopic?.order,l.length]);const r=l[n]??null;r&&A[r.order];const H=i?.topicCount??l.length,D=i?.percentComplete??0,P=i?.topicCount&&i.topicCount>0?i.completedCount>=i.topicCount:!1,S=r?.status??"not_started",K=re[S],U=ae[S],j=r?r.completedAt?`Completed ${new Date(r.completedAt).toLocaleString()}`:r.lastViewedAt?`Last viewed ${new Date(r.lastViewedAt).toLocaleString()}`:null:null,L=(s,a,o={})=>{if(y)return;const h=s==="start"?`/academy/my-enrollments/${t.id}/topics/${a.order}/start`:`/academy/my-enrollments/${t.id}/topics/${a.order}/complete`,v=l.findIndex(w=>w.order===a.order);I(s),G.post(h,{},{preserveScroll:!0,onFinish:()=>I(null),onSuccess:()=>{v<0||(o.preserveActive?d(w=>w===v?w:v):d(v))}})},N=s=>{if(s<0||s>=l.length)return;d(s);const a=l[s];!x&&a.status==="not_started"&&L("start",a,{preserveActive:!0})},z=()=>{if(!c||l.length===0)return;const s=i?.nextTopic?.order,a=Math.max(typeof s=="number"?Math.min(l.findIndex(o=>o.order===s),l.length-1):l.length-1,0);N(a)};return e.jsxs(J,{children:[e.jsx(Y,{title:t.course?.title?`${t.course.title} · Enrollment`:"Enrollment detail"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs(q,{href:"/academy/my-enrollments",className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:[e.jsx(V,{className:"h-4 w-4"}),"Back to enrollments"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[t.course?.courseTypeLabel?e.jsx(_,{variant:"outline",className:"rounded-full border-slate-300 text-slate-600",children:t.course.courseTypeLabel}):null,e.jsx(_,{className:"rounded-full bg-primary/10 text-primary",children:F}),e.jsx(_,{className:t.paymentVerified?"rounded-full bg-emerald-500 text-white":"rounded-full bg-amber-400 text-slate-900",children:t.paymentVerified?"Payment verified":"Verification pending"})]})]}),e.jsx(p,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsxs(u,{className:"space-y-5 px-6 py-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:t.course?.title??"Course removed"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[t.course?.program?.name?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 font-medium",children:[e.jsx(E,{className:"h-3.5 w-3.5 text-primary"}),t.course.program.name]}):null,t.course?.duration?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 font-medium",children:[e.jsx(k,{className:"h-3.5 w-3.5 text-primary"}),t.course.duration]}):null]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-5 py-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Enrollment date"}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:g?g.toLocaleString():"Not available"}),g&&e.jsx("p",{className:"text-xs text-slate-500",children:X(g,{addSuffix:!0})})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-5 py-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Payment status"}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:t.isPaid?"Paid":"Unpaid"}),t.paymentVerified?e.jsxs("span",{className:"mt-2 inline-flex items-center gap-2 text-xs text-emerald-600",children:[e.jsx(f,{className:"h-4 w-4"}),"Verified by academy team"]}):e.jsxs("span",{className:"mt-2 inline-flex items-center gap-2 text-xs text-amber-600",children:[e.jsx(Q,{className:"h-4 w-4"}),"Awaiting verification"]})]})]}),t.course?.description?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Course overview"}),e.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:t.course.description})]}):null,x?e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:[e.jsx("p",{className:"font-semibold",children:"Content locked"}),e.jsx("p",{className:"mt-1",children:T}),e.jsx("p",{className:"mt-2 text-xs text-amber-600",children:"Tip: once verification is complete, refresh this dashboard to access every lesson instantly."})]}):null,t.course?.keyLearningObjectives?.length?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Key learning objectives"}),e.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:t.course.keyLearningObjectives.map((s,a)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary"}),s]},a))})]}):null]})}),!x&&c&&i&&H>0?e.jsx(p,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsxs(u,{className:"flex flex-col gap-4 px-6 py-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Learning progress"}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-3xl font-semibold text-slate-900",children:[D,"%"]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[i.completedCount," of ",i.topicCount," topics complete"]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200 md:w-80",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all duration-500",style:{width:`${D}%`}})}),P?e.jsxs("p",{className:"inline-flex items-center gap-2 text-xs font-semibold text-emerald-600",children:[e.jsx(f,{className:"h-3.5 w-3.5"}),"All modules completed – amazing work!"]}):i.nextTopic?e.jsxs("p",{className:"inline-flex items-center gap-2 text-xs text-slate-600",children:[e.jsx(E,{className:"h-3.5 w-3.5 text-primary"}),"Next module: ",i.nextTopic.title]}):null]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(b,{type:"button",variant:"outline",className:"rounded-full px-4 py-2 text-sm",onClick:z,disabled:l.length===0||y!==null,children:P?"Review modules":"Resume learning"})})]})}):null,c?e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,260px)_minmax(0,1fr)]",children:[e.jsx(p,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsxs(u,{className:"space-y-4 px-5 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[e.jsx(ee,{className:"h-4 w-4 text-primary"}),"Course outline"]}),l.length>0?e.jsxs("span",{className:"text-xs text-slate-500",children:[n+1," / ",l.length]}):null]}),e.jsx("div",{className:"space-y-2",children:l.length===0?e.jsx("div",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-3 py-8 text-center text-xs text-slate-500",children:"Course topics will appear here once published."}):l.map((s,a)=>e.jsx("button",{type:"button",onClick:()=>N(a),className:M("w-full rounded-lg border px-3 py-3 text-left transition",a===n?"border-primary/40 bg-primary/10 text-primary":"border-slate-200 hover:border-primary/30 hover:bg-primary/5",s.status==="completed"&&a!==n?"border-emerald-200 bg-emerald-50/70 text-emerald-700":"",s.status==="in_progress"&&a!==n?"border-amber-200 bg-amber-50/70 text-amber-700":""),children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm font-semibold",children:[e.jsx("span",{children:s.title}),s.duration?e.jsx("span",{className:"text-xs font-medium text-slate-500",children:s.duration}):null]}),s.subtopics?.length?e.jsxs("p",{className:"text-[11px] text-slate-500",children:[s.subtopics.slice(0,2).join(" · "),s.subtopics.length>2?"…":""]}):null,e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-500",children:[e.jsx("span",{className:M("h-1.5 w-1.5 rounded-full",s.status==="completed"?"bg-emerald-500":s.status==="in_progress"?"bg-amber-500":"bg-slate-300")}),e.jsx("span",{children:R[s.status??"not_started"]})]})]})},s.id))})]})}),e.jsxs("div",{className:"space-y-4 min-w-0",children:[e.jsx(p,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsx(u,{className:"space-y-4 px-6 py-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-primary",children:["Module ",n+1]}),e.jsx("h2",{className:"mt-1 text-lg font-semibold text-slate-900",children:r.title})]}),r.duration?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-primary/20 bg-primary/5 px-3 py-1 text-xs font-medium text-primary",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),r.duration]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[e.jsxs("span",{className:M("inline-flex items-center gap-2 rounded-full border px-3 py-1 font-semibold",U),children:[e.jsx(K,{className:"h-3.5 w-3.5"}),R[S]]}),j?e.jsx("span",{className:"text-[11px] text-slate-500",children:j}):null]}),r.subtopics?.length?e.jsxs("div",{className:"space-y-2 rounded-lg border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Subtopics"}),e.jsx("ul",{className:"space-y-1",children:r.subtopics.map((s,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary/70"}),s]},a))})]}):null,x?e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 px-4 py-6 text-sm text-amber-700",children:[e.jsx("p",{className:"font-semibold",children:"Awaiting payment verification"}),e.jsx("p",{className:"mt-1",children:T})]}):e.jsxs(e.Fragment,{children:[e.jsx("article",{className:"course-content space-y-4 text-sm leading-relaxed text-slate-700 [&>h1]:text-xl [&>h1]:font-semibold [&>h2]:text-lg [&>h2]:font-semibold [&>h3]:text-base [&>h3]:font-semibold [&>p]:mt-3 [&>p:first-of-type]:mt-0 [&>ul]:list-disc [&>ul]:pl-5 [&>ol]:list-decimal [&>ol]:pl-5 [&>pre]:overflow-x-auto [&>pre]:rounded-lg [&>pre]:bg-slate-900/90 [&>pre]:p-4 [&>pre]:text-xs [&>pre]:text-slate-100 [&>pre]:whitespace-pre-wrap [&>pre]:wrap-break-word [&>pre>code]:whitespace-pre-wrap [&>pre>code]:wrap-break-word",dangerouslySetInnerHTML:{__html:r.content??"<p>No written content available yet for this topic.</p>"}}),e.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-100 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] text-slate-500",children:[j?e.jsx("span",{children:j}):null,r.completedAt?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-600",children:[e.jsx(f,{className:"h-3.5 w-3.5"}),"Completed"]}):r.status==="in_progress"?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-600",children:[e.jsx(C,{className:"h-3.5 w-3.5"}),"In progress"]}):null]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{type:"button",variant:"outline",className:"flex items-center gap-2",onClick:()=>r&&L("start",r,{preserveActive:!0}),disabled:!r||r.status==="in_progress"||r.status==="completed"||y!==null,children:[e.jsx(C,{className:"h-4 w-4"}),"Mark in progress"]}),e.jsxs(b,{type:"button",className:"flex items-center gap-2 bg-primary text-white hover:bg-primary/90",onClick:()=>r&&L("complete",r),disabled:!r||r.status==="completed"||y!==null,children:[e.jsx(f,{className:"h-4 w-4"}),"Mark completed"]})]})]})]})]}):e.jsx("div",{className:"rounded-lg border border-dashed border-slate-200 bg-slate-50 px-4 py-12 text-center text-sm text-slate-500",children:"Select a topic from the outline to start learning."})})}),l.length>0?e.jsxs("div",{className:"flex flex-wrap justify-between gap-3",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>N(n-1),disabled:n===0,className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Previous"]}),e.jsxs(b,{type:"button",onClick:()=>N(n+1),disabled:n>=l.length-1,className:"flex items-center gap-2 bg-primary text-white hover:bg-primary/90",children:["Next lesson",e.jsx(C,{className:"h-4 w-4"})]})]}):null]})]}):e.jsx("div",{className:"space-y-6",children:B.length?e.jsx(p,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:e.jsxs(u,{className:"space-y-4 px-6 py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[e.jsx(W,{className:"h-4 w-4 text-primary"}),"Complete syllabus"]}),e.jsx("div",{className:"space-y-4",children:B.map(s=>e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-5 py-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-primary",children:["Session ",s.session]}),s.hours?e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-primary/20 bg-white px-3 py-1 text-xs font-medium text-primary",children:[e.jsx(k,{className:"h-3.5 w-3.5"}),s.hours]}):null]}),e.jsx("h3",{className:"mt-2 text-base font-semibold text-slate-900",children:s.course_topic}),s.description?e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:s.description}):null,s.learnings.length?e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:"Key learnings"}),e.jsx("ul",{className:"space-y-1",children:s.learnings.map((a,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary"}),a]},`${s.id}-learning-${o}`))})]}):null,s.activities.length?e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:"Activities"}),e.jsx("ul",{className:"space-y-1",children:s.activities.map((a,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-primary/70"}),a]},`${s.id}-activity-${o}`))})]}):null]},s.id))})]})}):e.jsx(p,{className:"rounded-xl border border-dashed border-slate-200 bg-white shadow-sm",children:e.jsx(u,{className:"px-6 py-10 text-center text-sm text-slate-500",children:"Syllabus details will appear here once your mentor shares the module plan."})})})]})]})}export{Ce as default};
