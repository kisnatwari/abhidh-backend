import{r as h,j as e,b as g}from"./app-Bgxzhrvc.js";import{D as w,b,a as _,c as C,d as k,f as D,g as S}from"./dialog-DyAeqWL_.js";import{B as r}from"./button-2PUVNpYc.js";import{B as a}from"./badge-COGybBTW.js";import{S as i}from"./separator-FlmhJZ9J.js";import{C as E}from"./CourseController-IFXHYWAo.js";import V from"./edit-pVLlpBl7.js";import P from"./delete-BeTXdEDd.js";import{c as f}from"./createLucideIcon-BU9_NwhO.js";import{M as B}from"./mail-BVOzyyfp.js";import{B as L}from"./book-open-BjiUjtD7.js";import{G as U}from"./graduation-cap-BuMJYJEB.js";import{C as F}from"./calendar-BrwU7UZb.js";import{C as n}from"./circle-check-DodhxjX6.js";import{C as I}from"./circle-x-NcMTzUnD.js";import{C as M}from"./clock-DTa5xwFK.js";import"./app-h36GOZo8.js";import"./index-Np49ePWI.js";import"./index-DdyAvwB5.js";import"./index-5AvLgYyg.js";import"./index-Daeha8jH.js";import"./x-BCrVPaUR.js";import"./index-DzWfvSAt.js";import"./index-DW9AIAM8.js";import"./EnrollmentController-nChSkhQE.js";import"./input-B3PHjxIm.js";import"./label-HpvW4xIi.js";import"./select-eSxMpkvs.js";import"./index-BNpA7cIy.js";import"./index-BWC38D-R.js";import"./index-BK3Sl8pL.js";import"./index-DJFfSsPm.js";import"./chevron-down-DzLhHXXM.js";import"./check-CYIf4FlW.js";import"./chevron-up-C5vaA1vC.js";import"./switch-p5ihBc0A.js";import"./input-error-9URGWeZJ.js";import"./loader-circle-BgM9NXsF.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],z=f("FileImage",O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],A=f("User",T),H={active:"Active",completed:"Completed",dropped:"Dropped"},R={active:"bg-green-500",completed:"bg-blue-500",dropped:"bg-red-500"};function Se({enrollment:s,courses:o,users:l,trigger:c,open:d,onOpenChange:u}){const[j,N]=h.useState(!1),[m,t]=h.useState(!1),v=d!==void 0?d:j,x=u||N;return e.jsxs(w,{open:v,onOpenChange:x,children:[c&&e.jsx(b,{asChild:!0,children:c}),e.jsxs(_,{className:"sm:max-w-4xl max-h-[95vh] overflow-y-auto",children:[e.jsx(C,{children:e.jsx(k,{className:"text-2xl",children:"Enrollment Details"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Student Information"]}),e.jsxs("div",{className:"space-y-3 pl-7",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[80px]",children:"Name:"}),e.jsx("span",{className:"font-medium",children:s.user?.name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("strong",{className:"text-muted-foreground min-w-[80px]",children:"Email:"}),e.jsx("span",{children:s.user?.email||"Unknown"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"Course Information"]}),e.jsxs("div",{className:"space-y-3 pl-7",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[80px]",children:"Course:"}),s.course?e.jsx(r,{variant:"link",className:"p-0 h-auto font-normal text-base",onClick:()=>g.visit(E.show.url(s.course.id)),children:s.course.title}):e.jsx("span",{children:"Unknown"})]}),s.course?.program&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("strong",{className:"text-muted-foreground min-w-[80px]",children:"Program:"}),e.jsx(a,{variant:"outline",className:"font-normal",children:s.course.program.name})]})]})]}),s.payment_screenshot_path&&e.jsxs("div",{className:"border rounded-lg p-4 bg-card border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Payment Screenshot",!s.payment_verified&&e.jsx(a,{variant:"secondary",className:"text-white bg-yellow-600 ml-2",children:"Pending Review"})]}),s.payment_screenshot_url?e.jsxs("div",{className:"space-y-3 pl-7",children:[e.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-3 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"relative w-full flex justify-center items-center",children:e.jsx("img",{src:s.payment_screenshot_url,alt:"Payment Screenshot",className:"max-w-full max-h-[500px] h-auto rounded-lg shadow-lg cursor-pointer hover:opacity-90 transition-opacity border border-gray-200 dark:border-gray-800",onClick:()=>window.open(s.payment_screenshot_url,"_blank"),onError:y=>{const p=y.target;p.src="/placeholder-image.png",p.alt="Failed to load image"}})})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.open(s.payment_screenshot_url,"_blank"),className:"w-full sm:w-auto",children:"Open Full Size in New Tab"})]}):e.jsx("div",{className:"pl-7 text-muted-foreground",children:"Screenshot URL not available"})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Enrollment Details"]}),e.jsxs("div",{className:"space-y-4 pl-7",children:[e.jsx("div",{className:"flex items-center gap-4 flex-wrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Status:"}),e.jsx(a,{variant:"secondary",className:`text-white ${R[s.status]}`,children:H[s.status]})]})}),e.jsx(i,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Payment Status:"}),s.is_paid?e.jsxs(a,{variant:"default",className:"bg-green-600",children:[e.jsx(n,{className:"h-3 w-3 mr-1"}),"Paid"]}):e.jsxs(a,{variant:"outline",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"Unpaid"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Verification:"}),s.payment_verified?e.jsxs(a,{variant:"secondary",className:"text-white bg-green-600",children:[e.jsx(n,{className:"h-3 w-3 mr-1"}),"Verified"]}):s.payment_screenshot_path?e.jsxs(a,{variant:"secondary",className:"text-white bg-yellow-600",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"Pending"]}):e.jsx(a,{variant:"outline",children:"No Screenshot"})]})]}),(s.payment_verified_at||s.verified_by||s.enrollment_date)&&e.jsxs(e.Fragment,{children:[e.jsx(i,{}),e.jsxs("div",{className:"space-y-2",children:[s.payment_verified_at&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Verified At:"}),e.jsx("span",{children:new Date(s.payment_verified_at).toLocaleString()})]}),s.verified_by&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Verified By:"}),e.jsx(a,{variant:"outline",children:s.verified_by.name})]}),s.enrollment_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-muted-foreground min-w-[140px]",children:"Enrollment Date:"}),e.jsx("span",{children:new Date(s.enrollment_date).toLocaleDateString()})]})]})]}),e.jsx(i,{}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Created:"})," ",new Date(s.created_at).toLocaleString()]})]})]})]}),e.jsxs(D,{className:"gap-2 sm:gap-0 mt-4 flex-wrap",children:[s.payment_screenshot_path&&!s.payment_verified&&e.jsxs(r,{variant:"default",size:"default",onClick:()=>{confirm("Are you sure you want to verify this payment? The user will be automatically enrolled.")&&(t(!0),g.post(`/enrollments/${s.id}/verify`,{},{preserveScroll:!0,onSuccess:()=>{x(!1),t(!1)},onError:()=>{t(!1)}}))},disabled:m,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-none",children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),m?"Verifying...":"Verify Payment"]}),o&&l&&e.jsx(V,{enrollment:s,courses:o,users:l,trigger:e.jsx(r,{variant:"outline",className:"flex-1 sm:flex-none",children:"Edit"})}),e.jsx(P,{enrollment:s,trigger:e.jsx(r,{variant:"destructive",className:"flex-1 sm:flex-none",children:"Delete"})}),e.jsx(S,{asChild:!0,children:e.jsx(r,{type:"button",variant:"secondary",className:"flex-1 sm:flex-none",children:"Close"})})]})]})]})}export{Se as default};
