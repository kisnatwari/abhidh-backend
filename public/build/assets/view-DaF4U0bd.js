import{r as c,j as e}from"./app-Bgxzhrvc.js";import{D as d,b as m,a as u,c as p,d as h,f as x,g as f}from"./dialog-DyAeqWL_.js";import{B as s}from"./button-2PUVNpYc.js";import j from"./edit-CEzUl43m.js";import v from"./delete-Cy0lVjLp.js";import{B as i}from"./badge-COGybBTW.js";import{c as g}from"./createLucideIcon-BU9_NwhO.js";import"./app-h36GOZo8.js";import"./index-Np49ePWI.js";import"./index-DdyAvwB5.js";import"./index-5AvLgYyg.js";import"./index-Daeha8jH.js";import"./x-BCrVPaUR.js";import"./index-DzWfvSAt.js";import"./GalleryController-DimcFaM-.js";import"./index-DW9AIAM8.js";import"./input-B3PHjxIm.js";import"./label-HpvW4xIi.js";import"./input-error-9URGWeZJ.js";import"./rich-text-editor-BcwHZ5q7.js";import"./youtube-THD4qb3f.js";import"./image-DQYlxjbm.js";import"./loader-circle-BgM9NXsF.js";import"./trash-2-Du2-C_M2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],b=g("ExternalLink",w);function A({gallery:t,trigger:o}){const[n,l]=c.useState(!1);return e.jsxs(d,{open:n,onOpenChange:l,children:[e.jsx(m,{asChild:!0,children:o??e.jsx(s,{variant:"outline",children:"View"})}),e.jsxs(u,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(p,{children:e.jsx(h,{children:t.title})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(i,{variant:"outline",children:t.media_type==="youtube"?"YouTube Video":"Image Collection"}),t.option?e.jsx(i,{variant:"secondary",children:t.option}):null,e.jsxs("span",{children:["Created ",new Date(t.created_at).toLocaleDateString()]})]}),t.description&&e.jsx("div",{className:"text-muted-foreground prose max-w-none",dangerouslySetInnerHTML:{__html:t.description}}),t.media_type==="youtube"&&t.youtube_url?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-xl border",children:e.jsx("iframe",{src:N(t.youtube_url),title:t.title,className:"h-full w-full",allowFullScreen:!0})}),e.jsxs(s,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>window.open(t.youtube_url,"_blank"),children:["Watch on YouTube",e.jsx(b,{className:"ml-2 h-4 w-4"})]})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.photos&&t.photos.length>0?t.photos.map((r,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:r.photo_url,alt:r.caption||`Photo ${a+1}`,className:"w-full h-32 object-cover rounded border"}),r.caption&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:r.caption})]},r.id||a)):e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"No photos in this gallery"})})]}),e.jsxs(x,{className:"gap-2 sm:gap-0 mt-4",children:[e.jsx(j,{gallery:t,trigger:e.jsx(s,{variant:"outline",children:"Edit"})}),e.jsx(v,{gallery:t,trigger:e.jsx(s,{variant:"destructive",children:"Delete"})}),e.jsx(f,{asChild:!0,children:e.jsx(s,{type:"button",variant:"secondary",children:"Close"})})]})]})]})}function N(t){const o=D(t);return o?`https://www.youtube.com/embed/${o}`:t}function D(t){try{const o=new URL(t);if(o.hostname==="youtu.be")return o.pathname.replace("/","")||null;if(o.searchParams.has("v"))return o.searchParams.get("v");if(o.pathname.startsWith("/embed/"))return o.pathname.split("/")[2]??null}catch{return null}return null}export{A as default};
