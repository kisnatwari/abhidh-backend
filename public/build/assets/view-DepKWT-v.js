import{r as a,j as e,b as c}from"./app-DnFC_eNL.js";import{D as j,b as g,a as f,c as N,d as v,f as b,g as y}from"./dialog-BPceDQJC.js";import{B as d}from"./button-rPaPehJE.js";import{B as n}from"./badge-B_wMtSsn.js";import{T as _}from"./textarea--jYAAOoe.js";import{L as r}from"./label-CL8gTQN-.js";import{E as w}from"./eye-qenwXw_6.js";import{L as S}from"./loader-circle-BcRx3z9B.js";import{M as C}from"./mail-D70W53XR.js";import"./app-D68BraIN.js";import"./index-Cry_GVru.js";import"./index-CXkLwl-k.js";import"./index-BkDfLQMe.js";import"./index-Dw2Xby9W.js";import"./x-DqWHb4Jg.js";import"./createLucideIcon-RyHhqoDJ.js";import"./index-CNKFNWvJ.js";function I({contact:s,trigger:o}){const[u,t]=a.useState(!1),[l,m]=a.useState(""),[i,x]=a.useState(!1),p=()=>{if(!l.trim()){alert("Please enter a reply message");return}x(!0),c.post(`/contact-us/${s.id}/reply`,{reply_message:l},{onSuccess:()=>{t(!1),m("")},onFinish:()=>x(!1),preserveScroll:!0})};return e.jsxs(j,{open:u,onOpenChange:t,children:[e.jsx(g,{asChild:!0,children:o??e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"View"]})}),e.jsxs(f,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(N,{children:e.jsx(v,{children:"Inquiry Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Source"}),e.jsx("p",{className:"text-sm font-medium capitalize",children:s.source||"—"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Name"}),e.jsx("p",{className:"text-sm font-medium",children:s.name||"—"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("a",{className:"text-sm block font-medium text-primary hover:underline",href:`mailto:${s.email}`,children:s.email})]}),s.phone&&e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium",children:s.phone})]}),s.subject&&e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Subject"}),e.jsx("p",{className:"text-sm font-medium",children:s.subject})]}),s.courses&&e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Related Courses"}),e.jsx("p",{className:"text-sm font-medium",children:s.courses})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:s.is_replied?e.jsx(n,{variant:"default",children:"Replied"}):e.jsx(n,{variant:"secondary",children:"Pending"})})]}),s.is_replied&&s.replied_at&&e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Replied At"}),e.jsxs("p",{className:"text-sm font-medium",children:[new Date(s.replied_at).toLocaleString(),s.replied_at_human?e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",s.replied_at_human,")"]}):null]}),s.replied_by&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",s.replied_by.name]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Submitted"}),e.jsxs("p",{className:"text-sm font-medium",children:[new Date(s.created_at).toLocaleString(),s.created_at_human?e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",s.created_at_human,")"]}):null]})]})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Message"}),e.jsx("div",{className:"mt-2 p-3 bg-muted/50 rounded-md",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.message})})]}),s.is_replied&&s.reply_message&&e.jsxs("div",{children:[e.jsx(r,{className:"text-xs text-muted-foreground",children:"Previous Reply"}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-md border border-blue-200 dark:border-blue-800",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.reply_message})})]}),!s.is_replied&&e.jsxs("div",{children:[e.jsx(r,{htmlFor:"reply_message",children:"Reply Message"}),e.jsx(_,{id:"reply_message",value:l,onChange:h=>m(h.target.value),placeholder:"Enter your reply message here...",className:"mt-2 min-h-[150px]",disabled:i}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This message will be sent via email to ",s.email]})]})]}),e.jsxs(b,{className:"gap-2 sm:gap-0",children:[e.jsx(y,{asChild:!0,children:e.jsx(d,{type:"button",variant:"outline",disabled:i,children:s.is_replied?"Close":"Cancel"})}),!s.is_replied&&e.jsxs(d,{type:"button",onClick:p,disabled:i||!l.trim(),children:[i&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(C,{className:"mr-2 h-4 w-4"}),"Send Reply"]})]})]})]})}export{I as default};
